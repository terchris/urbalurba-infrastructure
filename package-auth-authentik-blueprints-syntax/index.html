
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Complete datacenter on your laptop - Kubernetes infrastructure for local development and production">
      
      
      
        <link rel="canonical" href="https://terchris.github.io/urbalurba-infrastructure/package-auth-authentik-blueprints-syntax/">
      
      
        <link rel="prev" href="../package-auth-authentik-auth10-developer-guide/">
      
      
        <link rel="next" href="../package-auth-authentik-technical-implementation/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Blueprints Syntax - Urbalurba Infrastructure</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentik-blueprints-manual" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Urbalurba Infrastructure" class="md-header__button md-logo" aria-label="Urbalurba Infrastructure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Urbalurba Infrastructure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blueprints Syntax
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/terchris/urbalurba-infrastructure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    terchris/urbalurba-infrastructure
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Urbalurba Infrastructure" class="md-nav__button md-logo" aria-label="Urbalurba Infrastructure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Urbalurba Infrastructure
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/terchris/urbalurba-infrastructure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    terchris/urbalurba-infrastructure
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Hosts & Platforms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hosts & Platforms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-rancher-kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rancher Desktop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-azure-aks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure AKS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-azure-microk8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure MicroK8s
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-multipass-microk8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multipass MicroK8s
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-raspberry-microk8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-cloud-init-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud Init
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-cloud-init-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud Init Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Packages
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Packages
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI & ML
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI & ML
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-litellm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiteLLM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-litellm-client-key-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiteLLM Client Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-openwebui-model-access-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenWebUI Model Access
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-environment-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Authentication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-auth10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth10 Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-auth10-developer-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Blueprints Syntax
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Blueprints Syntax
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-yaml-anatomy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint YAML Anatomy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Components
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Special Labels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-configmap-pattern-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kubernetes ConfigMap Pattern (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Benefits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-configuration-for-blueprints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm Configuration for Blueprints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helm Configuration for Blueprints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-configmaps-to-authentik" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connecting ConfigMaps to Authentik
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm-values-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm Values Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-deployment-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Deployment Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blueprint-discovery-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Discovery Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-configuration-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Configuration Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-complete-helm-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Complete Helm Values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-helm-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Helm Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Helm Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-not-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Not Loading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-configuration-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Configuration Mistakes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blueprint-updates-and-redeployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Updates and Redeployment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    <span class="md-ellipsis">
      
        States
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifiers-vs-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Identifiers vs Attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Object Relationships
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-yaml-tags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom YAML Tags
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom YAML Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-lookup-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Find - Lookup Objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyof-reference-by-id" class="md-nav__link">
    <span class="md-ellipsis">
      
        !KeyOf - Reference by ID
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-use-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Context - Use Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format-string-formatting" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Format - String Formatting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-conditional-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        !If - Conditional Logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Env - Environment Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-file-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        !File - File Contents
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-application-with-proxy-provider" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: Application with Proxy Provider
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-oauth2oidc-application-openwebui" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: OAuth2/OIDC Application (OpenWebUI)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-users-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Users and Groups
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blueprint-development-methodology" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Development Methodology
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blueprint Development Methodology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-blueprint-documentation-is-insufficient" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Blueprint Documentation is Insufficient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-manual-setup-export-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Manual Setup + Export Method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-manual-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Create Manual Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-export-working-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Export Working Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-analyze-export-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Analyze Export Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-identify-key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Identify Key Differences
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-corrected-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Create Corrected Blueprint
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-commands-quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Export Commands Quick Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-models-for-export" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Models for Export
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#success-indicators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Success Indicators
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation Benefits
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-oidc-application-setup-simple" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. OIDC Application Setup (Simple)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-saml-application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. SAML Application Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bulk-user-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Bulk User Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-custom-flow-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Custom Flow Creation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Organization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-standards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation Standards
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependency Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-and-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing and Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-not-applied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Not Applied
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-not-found-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Object Not Found Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invalid-blueprint-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Invalid Blueprint Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-configuration-failures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex Configuration Failures
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permission Denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-export-commands-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Export Commands for Debugging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful Commands
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Essential Models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-authentik_coreapplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application (authentik_core.application)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-provider-authentik_providers_oauth2oauth2provider" class="md-nav__link">
    <span class="md-ellipsis">
      
        OAuth2 Provider (authentik_providers_oauth2.oauth2provider)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-provider-authentik_providers_proxyproxyprovider" class="md-nav__link">
    <span class="md-ellipsis">
      
        Proxy Provider (authentik_providers_proxy.proxyprovider)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-authentik_coreuser" class="md-nav__link">
    <span class="md-ellipsis">
      
        User (authentik_core.user)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-authentik_coregroup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Group (authentik_core.group)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Checklist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Template
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-technical-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-testusers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Users
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-core-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-core-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nginx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Databases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Databases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-postgresql-container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Container
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-mongodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MongoDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-qdrant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qdrant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Science
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Science
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-jupyterhub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JupyterHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-unitycatalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unity Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ArgoCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-pgadmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    pgAdmin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-rabbitmq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RabbitMQ Admin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-redisinsight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RedisInsight
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Monitoring
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-loki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-otel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenTelemetry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-sovdev-logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SovDev Logger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Message Queues
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Message Queues
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-rabbitmq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RabbitMQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Search
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Search
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-search-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-search-elasticsearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Networking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Networking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-tailscale-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tailscale Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-tailscale-networkisolation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tailscale Network Isolation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-cloudflare-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloudflare Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Provision Host
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Provision Host
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-rancher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rancher Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Rules & Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rules & Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-automated-kubernetes-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-ingress-traefik/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress & Traefik
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-secrets-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-provisioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Provisioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-naming-conventions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Naming Conventions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-git-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-development-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-howtodoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation (Legacy)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manifests-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manifests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../secrets-management-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-yaml-anatomy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint YAML Anatomy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required Components
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#special-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Special Labels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Patterns
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kubernetes-configmap-pattern-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kubernetes ConfigMap Pattern (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Benefits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-configuration-for-blueprints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm Configuration for Blueprints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helm Configuration for Blueprints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connecting-configmaps-to-authentik" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connecting ConfigMaps to Authentik
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helm-values-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm Values Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-deployment-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Deployment Workflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blueprint-discovery-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Discovery Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-configuration-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Configuration Rules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-complete-helm-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example Complete Helm Values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting-helm-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Helm Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Helm Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-not-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Not Loading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-configuration-mistakes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Configuration Mistakes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blueprint-updates-and-redeployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Updates and Redeployment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    <span class="md-ellipsis">
      
        States
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifiers-vs-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Identifiers vs Attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Object Relationships
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-yaml-tags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Custom YAML Tags
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom YAML Tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find-lookup-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Find - Lookup Objects
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyof-reference-by-id" class="md-nav__link">
    <span class="md-ellipsis">
      
        !KeyOf - Reference by ID
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-use-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Context - Use Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format-string-formatting" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Format - String Formatting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-conditional-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        !If - Conditional Logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        !Env - Environment Variables
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-file-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        !File - File Contents
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-application-with-proxy-provider" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1: Application with Proxy Provider
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-oauth2oidc-application-openwebui" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2: OAuth2/OIDC Application (OpenWebUI)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-users-and-groups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 3: Users and Groups
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blueprint-development-methodology" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Development Methodology
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blueprint Development Methodology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-blueprint-documentation-is-insufficient" class="md-nav__link">
    <span class="md-ellipsis">
      
        When Blueprint Documentation is Insufficient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-manual-setup-export-method" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Manual Setup + Export Method
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-manual-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Create Manual Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-export-working-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Export Working Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-analyze-export-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Analyze Export Files
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-identify-key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Identify Key Differences
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-create-corrected-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Create Corrected Blueprint
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#export-commands-quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Export Commands Quick Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-models-for-export" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Models for Export
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#success-indicators" class="md-nav__link">
    <span class="md-ellipsis">
      
        Success Indicators
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation Benefits
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Use Cases
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-oidc-application-setup-simple" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. OIDC Application Setup (Simple)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-saml-application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. SAML Application Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bulk-user-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Bulk User Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-custom-flow-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Custom Flow Creation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Organization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-standards" class="md-nav__link">
    <span class="md-ellipsis">
      
        Documentation Standards
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependency-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dependency Management
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-and-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing and Validation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blueprint-not-applied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blueprint Not Applied
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-not-found-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Object Not Found Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invalid-blueprint-format" class="md-nav__link">
    <span class="md-ellipsis">
      
        Invalid Blueprint Format
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-configuration-failures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complex Configuration Failures
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Permission Denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-export-commands-for-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Export Commands for Debugging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful Commands
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Reference
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#essential-models" class="md-nav__link">
    <span class="md-ellipsis">
      
        Essential Models
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Attributes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-authentik_coreapplication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application (authentik_core.application)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth2-provider-authentik_providers_oauth2oauth2provider" class="md-nav__link">
    <span class="md-ellipsis">
      
        OAuth2 Provider (authentik_providers_oauth2.oauth2provider)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proxy-provider-authentik_providers_proxyproxyprovider" class="md-nav__link">
    <span class="md-ellipsis">
      
        Proxy Provider (authentik_providers_proxy.proxyprovider)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-authentik_coreuser" class="md-nav__link">
    <span class="md-ellipsis">
      
        User (authentik_core.user)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#group-authentik_coregroup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Group (authentik_core.group)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        Template Checklist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        File Template
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="authentik-blueprints-manual">Authentik Blueprints Manual<a class="headerlink" href="#authentik-blueprints-manual" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Authentik blueprints provide a way to template, automate, and distribute authentik configuration as code. They allow you to define your authentication infrastructure declaratively using YAML files, enabling version control, reproducible deployments, and automated configuration management.</p>
<p>This manual focuses on the <strong>Kubernetes ConfigMap pattern</strong> for blueprint deployment, which provides automatic discovery and application of blueprints when authentik starts.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#basic-structure">Basic Structure</a></li>
<li><a href="#deployment-patterns">Deployment Patterns</a></li>
<li><a href="#helm-configuration-for-blueprints">Helm Configuration for Blueprints</a></li>
<li><a href="#core-concepts">Core Concepts</a></li>
<li><a href="#custom-yaml-tags">Custom YAML Tags</a></li>
<li><a href="#working-examples">Working Examples</a></li>
<li><a href="#blueprint-development-methodology">Blueprint Development Methodology</a></li>
<li><a href="#common-use-cases">Common Use Cases</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#quick-reference">Quick Reference</a></li>
</ol>
<hr />
<h2 id="basic-structure">Basic Structure<a class="headerlink" href="#basic-structure" title="Permanent link">&para;</a></h2>
<h3 id="blueprint-yaml-anatomy">Blueprint YAML Anatomy<a class="headerlink" href="#blueprint-yaml-anatomy" title="Permanent link">&para;</a></h3>
<p>Every authentik blueprint follows this basic structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Blueprint</span><span class="nv"> </span><span class="s">Name&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-app&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">Application&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">      </span><span class="c1"># ... other attributes</span>
</code></pre></div>
<h3 id="required-components">Required Components<a class="headerlink" href="#required-components" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>version</code></td>
<td></td>
<td>Blueprint format version (currently <code>1</code>)</td>
</tr>
<tr>
<td><code>entries</code></td>
<td></td>
<td>List of objects to create/manage</td>
</tr>
<tr>
<td><code>metadata.name</code></td>
<td></td>
<td>Human-readable blueprint name</td>
</tr>
<tr>
<td><code>context</code></td>
<td></td>
<td>Default context variables</td>
</tr>
<tr>
<td><code>metadata.labels</code></td>
<td></td>
<td>Special blueprint configuration labels</td>
</tr>
</tbody>
</table>
<h3 id="special-labels">Special Labels<a class="headerlink" href="#special-labels" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Label</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>blueprints.goauthentik.io/instantiate: "true"</code></td>
<td>Auto-apply blueprint on discovery</td>
</tr>
<tr>
<td><code>blueprints.goauthentik.io/system: "true"</code></td>
<td>Mark as system blueprint</td>
</tr>
<tr>
<td><code>blueprints.goauthentik.io/description: "text"</code></td>
<td>Blueprint description</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="deployment-patterns">Deployment Patterns<a class="headerlink" href="#deployment-patterns" title="Permanent link">&para;</a></h2>
<h3 id="kubernetes-configmap-pattern-recommended">Kubernetes ConfigMap Pattern (Recommended)<a class="headerlink" href="#kubernetes-configmap-pattern-recommended" title="Permanent link">&para;</a></h3>
<p>This is the pattern used in your working blueprints. It provides automatic discovery and application.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprint</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">app.kubernetes.io/component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blueprint</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">  </span><span class="nt">blueprint.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">    </span><span class="no"># yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="no">version: 1</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="no">metadata:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">      </span><span class="no">name: &quot;My Blueprint&quot;</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">      </span><span class="no">labels:</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="no">blueprints.goauthentik.io/instantiate: &quot;true&quot;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="no">context: {}</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">    </span><span class="no">entries:</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">      </span><span class="no"># Your blueprint entries here</span>
</code></pre></div>
<h3 id="key-benefits">Key Benefits<a class="headerlink" href="#key-benefits" title="Permanent link">&para;</a></h3>
<ul>
<li> <strong>Automatic Discovery</strong>: Authentik automatically detects and applies blueprints</li>
<li> <strong>Kubernetes Native</strong>: Deployed using standard Kubernetes resources</li>
<li> <strong>Version Control</strong>: Can be managed in Git alongside other manifests</li>
<li> <strong>Monitoring</strong>: Changes trigger automatic reapplication (every 60 minutes + file watchers)</li>
</ul>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ol>
<li>Authentik namespace must exist</li>
<li>Blueprint ConfigMaps must be applied <strong>BEFORE</strong> deploying Authentik with Helm</li>
<li>Proper labels must be set for automatic discovery</li>
<li><strong>Blueprint names must be listed in Helm values</strong> under <code>blueprints.configMaps</code></li>
</ol>
<hr />
<h2 id="helm-configuration-for-blueprints">Helm Configuration for Blueprints<a class="headerlink" href="#helm-configuration-for-blueprints" title="Permanent link">&para;</a></h2>
<h3 id="connecting-configmaps-to-authentik">Connecting ConfigMaps to Authentik<a class="headerlink" href="#connecting-configmaps-to-authentik" title="Permanent link">&para;</a></h3>
<p>For blueprint ConfigMaps to be discovered and applied by Authentik, they <strong>must be explicitly listed</strong> in the Helm values configuration. This is a crucial step that connects your deployed ConfigMaps to the running Authentik instance.</p>
<h3 id="helm-values-configuration">Helm Values Configuration<a class="headerlink" href="#helm-values-configuration" title="Permanent link">&para;</a></h3>
<p>Add the following to your Authentik Helm values file (e.g., <code>values.yaml</code> or <code>values-authentik.yaml</code>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Blueprint system configuration</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">blueprints</span><span class="p">:</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="c1"># List of ConfigMaps containing blueprints</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="c1"># Only keys ending with .yaml will be discovered and applied</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">configMaps</span><span class="p">:</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;whoami-forward-auth-blueprint&quot;</span><span class="w">        </span><span class="c1"># Proxy authentication setup</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;openwebui-authentik-blueprint&quot;</span><span class="w">         </span><span class="c1"># OAuth2/OIDC application setup</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;users-groups-test-blueprint&quot;</span><span class="w">           </span><span class="c1"># Test blueprint for users and groups</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="c1"># Add your blueprint ConfigMap names here</span>
</code></pre></div>
<h3 id="complete-deployment-workflow">Complete Deployment Workflow<a class="headerlink" href="#complete-deployment-workflow" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># 1. Deploy blueprint ConfigMaps FIRST (before Authentik)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>manifests/073-authentik-whoami-blueprint.yaml
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>manifests/074-authentik-openwebui-blueprint-hardcoded.yaml
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>manifests/072-authentik-users-groups-blueprint.yaml
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1"># 2. Verify ConfigMaps are created</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>kubectl<span class="w"> </span>get<span class="w"> </span>configmaps<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>-l<span class="w"> </span>app.kubernetes.io/component<span class="o">=</span>blueprint
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="c1"># 3. Deploy/upgrade Authentik with Helm (with blueprint references in values)</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>authentik<span class="w"> </span>authentik/authentik<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">  </span>-n<span class="w"> </span>authentik<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span>-f<span class="w"> </span>values-authentik.yaml<span class="w">  </span><span class="c1"># Contains the blueprints.configMaps configuration</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="c1"># 4. Monitor blueprint application</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-server<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>blueprint
</code></pre></div>
<h3 id="blueprint-discovery-process">Blueprint Discovery Process<a class="headerlink" href="#blueprint-discovery-process" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>ConfigMap Creation</strong>: Blueprint ConfigMaps are deployed to the <code>authentik</code> namespace</li>
<li><strong>Helm Reference</strong>: ConfigMap names are listed in <code>blueprints.configMaps</code> in Helm values</li>
<li><strong>Authentik Startup</strong>: When Authentik starts, it reads the configured ConfigMap list</li>
<li><strong>Blueprint Loading</strong>: Authentik loads and applies blueprints from the referenced ConfigMaps</li>
<li><strong>Automatic Reapplication</strong>: Changes to ConfigMaps trigger reapplication (monitored every 60 minutes)</li>
</ol>
<h3 id="key-configuration-rules">Key Configuration Rules<a class="headerlink" href="#key-configuration-rules" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Rule</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Exact Name Match</strong></td>
<td>ConfigMap names in Helm values must <strong>exactly match</strong> deployed ConfigMap names</td>
<td><code>configMaps: ["openwebui-authentik-blueprint"]</code></td>
</tr>
<tr>
<td><strong>YAML Files Only</strong></td>
<td>Only data keys ending with <code>.yaml</code> are processed</td>
<td><code>data: { "openwebui.yaml": "...", "readme.txt": "..." }</code>  Only <code>openwebui.yaml</code> processed</td>
</tr>
<tr>
<td><strong>Namespace Consistency</strong></td>
<td>ConfigMaps must be in the same namespace as Authentik</td>
<td>Both in <code>authentik</code> namespace</td>
</tr>
<tr>
<td><strong>Deploy Before Helm</strong></td>
<td>ConfigMaps must exist <strong>before</strong> Authentik deployment</td>
<td><code>kubectl apply -f blueprints/</code> then <code>helm install</code></td>
</tr>
</tbody>
</table>
<h3 id="example-complete-helm-values">Example Complete Helm Values<a class="headerlink" href="#example-complete-helm-values" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># values-authentik.yaml</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">authentik</span><span class="p">:</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nt">secret_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key-here&quot;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">postgresql</span><span class="p">:</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-pg-password&quot;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># Blueprint system configuration</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nt">blueprints</span><span class="p">:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span><span class="nt">configMaps</span><span class="p">:</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="c1"># Application blueprints</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;whoami-forward-auth-blueprint&quot;</span><span class="w">          </span><span class="c1"># Forward auth proxy setup</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;openwebui-authentik-blueprint&quot;</span><span class="w">           </span><span class="c1"># OAuth2/OIDC for OpenWebUI</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;grafana-saml-blueprint&quot;</span><span class="w">                  </span><span class="c1"># SAML setup for Grafana</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">    </span><span class="c1"># User management blueprints  </span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;users-groups-test-blueprint&quot;</span><span class="w">             </span><span class="c1"># Test users and departments</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;ldap-import-blueprint&quot;</span><span class="w">                   </span><span class="c1"># LDAP user synchronization</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">    </span><span class="c1"># Flow customization blueprints</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;custom-login-flow-blueprint&quot;</span><span class="w">             </span><span class="c1"># Custom authentication flow</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;mfa-enforcement-blueprint&quot;</span><span class="w">               </span><span class="c1"># Multi-factor authentication</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="c1"># Other Authentik configuration...</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="nt">image</span><span class="p">:</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">  </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024.8.3&quot;</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="nt">postgresql</span><span class="p">:</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">    </span><span class="nt">postgresPassword</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-pg-password&quot;</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">    </span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;authentik&quot;</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="nt">redis</span><span class="p">:</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h3 id="troubleshooting-helm-configuration">Troubleshooting Helm Configuration<a class="headerlink" href="#troubleshooting-helm-configuration" title="Permanent link">&para;</a></h3>
<h4 id="blueprint-not-loading">Blueprint Not Loading<a class="headerlink" href="#blueprint-not-loading" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: ConfigMap exists but blueprint not applied</p>
<p><strong>Check List</strong>:
1. <strong>Verify ConfigMap name in Helm values</strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Check deployed ConfigMap name</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>kubectl<span class="w"> </span>get<span class="w"> </span>configmaps<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>-l<span class="w"> </span>app.kubernetes.io/component<span class="o">=</span>blueprint
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Compare with Helm values</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>helm<span class="w"> </span>get<span class="w"> </span>values<span class="w"> </span>authentik<span class="w"> </span>-n<span class="w"> </span>authentik
</code></pre></div></p>
<ol>
<li>
<p><strong>Check ConfigMap data keys</strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>kubectl<span class="w"> </span>describe<span class="w"> </span>configmap<span class="w"> </span>openwebui-authentik-blueprint<span class="w"> </span>-n<span class="w"> </span>authentik
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># Look for .yaml files in data section</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Verify Authentik can read ConfigMaps</strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-server<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;configmap\|blueprint&quot;</span>
</code></pre></div></p>
</li>
</ol>
<h4 id="common-configuration-mistakes">Common Configuration Mistakes<a class="headerlink" href="#common-configuration-mistakes" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Issue</th>
<th>Wrong</th>
<th>Correct</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name Mismatch</strong></td>
<td><code>configMaps: ["openwebui-blueprint"]</code></td>
<td><code>configMaps: ["openwebui-authentik-blueprint"]</code></td>
</tr>
<tr>
<td><strong>Missing Quotes</strong></td>
<td><code>configMaps: [openwebui-authentik-blueprint]</code></td>
<td><code>configMaps: ["openwebui-authentik-blueprint"]</code></td>
</tr>
<tr>
<td><strong>Wrong Data Key</strong></td>
<td><code>data: { "blueprint.yml": "..." }</code></td>
<td><code>data: { "blueprint.yaml": "..." }</code></td>
</tr>
<tr>
<td><strong>Deploy Order</strong></td>
<td>Helm first, then ConfigMaps</td>
<td>ConfigMaps first, then Helm</td>
</tr>
</tbody>
</table>
<h3 id="blueprint-updates-and-redeployment">Blueprint Updates and Redeployment<a class="headerlink" href="#blueprint-updates-and-redeployment" title="Permanent link">&para;</a></h3>
<p>When updating blueprints:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Update blueprint ConfigMaps</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>manifests/074-authentik-openwebui-blueprint-hardcoded.yaml
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># Authentik automatically detects changes (within 60 minutes)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="c1"># Or force immediate reapplication:</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment/authentik-server<span class="w"> </span>-n<span class="w"> </span>authentik
</code></pre></div>
<p><strong>Note</strong>: New blueprints require updating Helm values and redeploying Authentik, but existing blueprint changes are automatically detected.</p>
<hr />
<h2 id="core-concepts">Core Concepts<a class="headerlink" href="#core-concepts" title="Permanent link">&para;</a></h2>
<h3 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h3>
<p>Authentik blueprints work with Django models. Each entry specifies a model to create or modify:</p>
<table>
<thead>
<tr>
<th>Common Models</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authentik_core.application</code></td>
<td>Applications</td>
</tr>
<tr>
<td><code>authentik_core.user</code></td>
<td>Users</td>
</tr>
<tr>
<td><code>authentik_core.group</code></td>
<td>Groups</td>
</tr>
<tr>
<td><code>authentik_providers_proxy.proxyprovider</code></td>
<td>Proxy providers</td>
</tr>
<tr>
<td><code>authentik_providers_oauth2.oauth2provider</code></td>
<td>OAuth2/OIDC providers</td>
</tr>
<tr>
<td><code>authentik_outposts.outpost</code></td>
<td>Outposts</td>
</tr>
<tr>
<td><code>authentik_flows.flow</code></td>
<td>Authentication flows</td>
</tr>
</tbody>
</table>
<h3 id="states">States<a class="headerlink" href="#states" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>State</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>present</code> (default)</td>
<td>Keep object in sync with definition</td>
</tr>
<tr>
<td><code>created</code></td>
<td>Create object if it doesn't exist, don't modify if it exists</td>
</tr>
<tr>
<td><code>absent</code></td>
<td>Delete the object</td>
</tr>
</tbody>
</table>
<h3 id="identifiers-vs-attributes">Identifiers vs Attributes<a class="headerlink" href="#identifiers-vs-attributes" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Identifiers</strong>: Unique fields used to find existing objects</li>
<li><strong>Attributes</strong>: Properties to set on the object</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-app&quot;</span><span class="w">  </span><span class="c1"># Used to find the object</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">App&quot;</span><span class="w">  </span><span class="c1"># Properties to set</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">      </span><span class="nt">meta_launch_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://app.example.com&quot;</span>
</code></pre></div>
<h3 id="object-relationships">Object Relationships<a class="headerlink" href="#object-relationships" title="Permanent link">&para;</a></h3>
<p>Objects can reference each other using special tags:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="c1"># Create provider first</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_providers_proxy.proxyprovider</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-provider&quot;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="c1"># ...</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">  </span><span class="c1"># Reference provider in application</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-app&quot;</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_proxy.proxyprovider</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">my-provider</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<hr />
<h2 id="custom-yaml-tags">Custom YAML Tags<a class="headerlink" href="#custom-yaml-tags" title="Permanent link">&para;</a></h2>
<h3 id="find-lookup-objects">!Find - Lookup Objects<a class="headerlink" href="#find-lookup-objects" title="Permanent link">&para;</a></h3>
<p>Find objects by their attributes and return their primary key:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_proxy.proxyprovider</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">my-provider</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nt">flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default-authentication-flow</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h3 id="keyof-reference-by-id">!KeyOf - Reference by ID<a class="headerlink" href="#keyof-reference-by-id" title="Permanent link">&para;</a></h3>
<p>Reference objects defined in the same blueprint by their <code>id</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_flows.flow</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-flow&quot;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow</span><span class="w">  </span><span class="c1"># Set an ID</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_flows.flowstagebinding</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="kt">!KeyOf</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flow</span><span class="w">  </span><span class="c1"># Reference by ID</span>
</code></pre></div>
<h3 id="context-use-variables">!Context - Use Variables<a class="headerlink" href="#context-use-variables" title="Permanent link">&para;</a></h3>
<p>Access context variables (useful for parameterized blueprints):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">context</span><span class="p">:</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">app_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MyApp&quot;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app_name</span>
</code></pre></div>
<h3 id="format-string-formatting">!Format - String Formatting<a class="headerlink" href="#format-string-formatting" title="Permanent link">&para;</a></h3>
<p>Format strings with variables:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="kt">!Format</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;%s-provider&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="nv">app_name</span><span class="p p-Indicator">]</span>
</code></pre></div>
<h3 id="if-conditional-logic">!If - Conditional Logic<a class="headerlink" href="#if-conditional-logic" title="Permanent link">&para;</a></h3>
<p>Conditionally include configuration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="kt">!If</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="kt">!Context</span><span class="w"> </span><span class="nv">production</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">]</span>
</code></pre></div>
<h3 id="env-environment-variables">!Env - Environment Variables<a class="headerlink" href="#env-environment-variables" title="Permanent link">&para;</a></h3>
<p>Use environment variables:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="kt">!Env</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SECRET_PASSWORD</span>
</code></pre></div>
<h3 id="file-file-contents">!File - File Contents<a class="headerlink" href="#file-file-contents" title="Permanent link">&para;</a></h3>
<p>Read file contents:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">certificate</span><span class="p">:</span><span class="w"> </span><span class="kt">!File</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/cert.pem</span>
</code></pre></div>
<hr />
<h2 id="working-examples">Working Examples<a class="headerlink" href="#working-examples" title="Permanent link">&para;</a></h2>
<h3 id="example-1-application-with-proxy-provider">Example 1: Application with Proxy Provider<a class="headerlink" href="#example-1-application-with-proxy-provider" title="Permanent link">&para;</a></h3>
<p>This example creates a complete forward authentication setup for a whoami application:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whoami-forward-auth-blueprint</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">    </span><span class="nt">app.kubernetes.io/component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blueprint</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">  </span><span class="nt">whoami-simple.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">    </span><span class="no">version: 1</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">    </span><span class="no">metadata:</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">      </span><span class="no">name: &quot;Complete Whoami Forward Auth Setup&quot;</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">      </span><span class="no">labels:</span>
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">        </span><span class="no">blueprints.goauthentik.io/instantiate: &quot;true&quot;</span>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">    </span><span class="no">context: {}</span>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="w">    </span><span class="no">entries:</span>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a><span class="w">      </span><span class="no"># Create the proxy provider first</span>
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="w">      </span><span class="no">- model: authentik_providers_proxy.proxyprovider</span>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="w">          </span><span class="no">name: &quot;whoami-provider&quot;</span>
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="w">          </span><span class="no">name: &quot;whoami-provider&quot;</span>
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a><span class="w">          </span><span class="no">mode: &quot;forward_single&quot;</span>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a><span class="w">          </span><span class="no">external_host: &quot;http://whoami.localhost&quot;</span>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="w">          </span><span class="no">access_token_validity: &quot;hours=24&quot;</span>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="w">          </span><span class="no">authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]</span>
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="w">      </span><span class="no"># Create the application</span>
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="w">      </span><span class="no">- model: authentik_core.application</span>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="w">          </span><span class="no">slug: &quot;whoami&quot;</span>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="w">          </span><span class="no">name: &quot;whoami&quot;</span>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="w">          </span><span class="no">provider: !Find [authentik_providers_proxy.proxyprovider, [name, whoami-provider]]</span>
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="w">      </span><span class="no"># Assign to outpost</span>
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a><span class="w">      </span><span class="no">- model: authentik_outposts.outpost</span>
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a><span class="w">          </span><span class="no">name: &quot;authentik Embedded Outpost&quot;</span>
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a><span class="w">          </span><span class="no">providers:</span>
<a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a><span class="w">            </span><span class="no">- !Find [authentik_providers_proxy.proxyprovider, [name, whoami-provider]]</span>
</code></pre></div>
<h3 id="example-2-oauth2oidc-application-openwebui">Example 2: OAuth2/OIDC Application (OpenWebUI)<a class="headerlink" href="#example-2-oauth2oidc-application-openwebui" title="Permanent link">&para;</a></h3>
<p>This example demonstrates a complete OAuth2/OIDC setup for OpenWebUI, <strong>developed using the reverse engineering methodology</strong> described later in this document:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openwebui-authentik-blueprint</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="nt">app.kubernetes.io/component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blueprint</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">  </span><span class="nt">openwebui.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">    </span><span class="no"># yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">    </span><span class="no">version: 1</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">    </span><span class="no">metadata:</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">      </span><span class="no">name: &quot;Complete OpenWebUI OAuth2/OIDC Setup&quot;</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">      </span><span class="no">labels:</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">        </span><span class="no">blueprints.goauthentik.io/instantiate: &quot;true&quot;</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">    </span><span class="no">context: {}</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">    </span><span class="no">entries:</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">      </span><span class="no"># Create the OAuth2/OIDC provider first (referenced by application)</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">      </span><span class="no">- model: authentik_providers_oauth2.oauth2provider</span>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a><span class="w">          </span><span class="no">name: openwebui-dev-provider</span>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="w">          </span><span class="no">name: openwebui-dev-provider</span>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="w">          </span><span class="no">client_type: confidential</span>
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="w">          </span><span class="no">client_id: 1c37QuM0qm0g2BzdLbhppVwmUwUUrhmB83e9inEe</span>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="w">          </span><span class="no">client_secret: BngAuX1zthtYnyAxPePAwyTqDxfVSq09IDRUTAonRcogYmhnfj39eBk709nKF4ej1OT7OMiJWVYIrwOrdizTFiyQxapQUEpDziPNucs5yxIciEx21PkK82IgURILL06h</span>
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="w">          </span><span class="no"># Correct redirect URIs format matching working config</span>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="w">          </span><span class="no">redirect_uris:</span>
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="w">            </span><span class="no">- matching_mode: strict</span>
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="w">              </span><span class="no">url: http://openwebui.localhost/oauth/oidc/callback</span>
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="w">          </span><span class="no"># Token validity settings from working config</span>
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="w">          </span><span class="no">access_code_validity: minutes=1</span>
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a><span class="w">          </span><span class="no">access_token_validity: minutes=5</span>
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a><span class="w">          </span><span class="no">refresh_token_validity: days=30</span>
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a><span class="w">          </span><span class="no"># Additional settings from working config</span>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a><span class="w">          </span><span class="no">sub_mode: hashed_user_id</span>
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a><span class="w">          </span><span class="no">issuer_mode: per_provider</span>
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a><span class="w">          </span><span class="no">include_claims_in_id_token: true</span>
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a><span class="w">          </span><span class="no"># Flow references</span>
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a><span class="w">          </span><span class="no">authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]</span>
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a><span class="w">          </span><span class="no">invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]</span>
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a><span class="w">          </span><span class="no">signing_key: !Find [authentik_crypto.certificatekeypair, [name, authentik Self-signed Certificate]]</span>
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a><span class="w">          </span><span class="no"># Property mappings - only the 3 that are actually used in working config</span>
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a><span class="w">          </span><span class="no">property_mappings:</span>
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a><span class="w">            </span><span class="no">- !Find [authentik_providers_oauth2.scopemapping, [name, &quot;authentik default OAuth Mapping: OpenID &#39;openid&#39;&quot;]]</span>
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a><span class="w">            </span><span class="no">- !Find [authentik_providers_oauth2.scopemapping, [name, &quot;authentik default OAuth Mapping: OpenID &#39;email&#39;&quot;]]</span>
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a><span class="w">            </span><span class="no">- !Find [authentik_providers_oauth2.scopemapping, [name, &quot;authentik default OAuth Mapping: OpenID &#39;profile&#39;&quot;]]</span>
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a><span class="w">      </span><span class="no"># Create the application and link it to the provider</span>
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a><span class="w">      </span><span class="no">- model: authentik_core.application</span>
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a><span class="w">          </span><span class="no">slug: openwebui-dev</span>
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a><span class="w">          </span><span class="no">name: openwebui-dev</span>
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a><span class="w">          </span><span class="no">slug: openwebui-dev</span>
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a><span class="w">          </span><span class="no"># Empty launch URL as in working config</span>
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a><span class="w">          </span><span class="no">meta_launch_url: &quot;&quot;</span>
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a><span class="w">          </span><span class="no">policy_engine_mode: any</span>
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a><span class="w">          </span><span class="no">provider: !Find [authentik_providers_oauth2.oauth2provider, [name, openwebui-dev-provider]]</span>
</code></pre></div>
<p><strong>Key Points from Reverse Engineering:</strong>
- <strong>Complex redirect URIs format</strong> with <code>matching_mode: strict</code> is required
- <strong>Multiple token validity settings</strong> must be specified exactly
- <strong>Property mappings</strong> should only include the 3 actually used (openid, email, profile)
- <strong>Additional OAuth2 attributes</strong> like <code>sub_mode</code>, <code>issuer_mode</code>, <code>include_claims_in_id_token</code> are crucial
- <strong>Empty launch URL</strong> works better than trying to specify one</p>
<h3 id="example-3-users-and-groups">Example 3: Users and Groups<a class="headerlink" href="#example-3-users-and-groups" title="Permanent link">&para;</a></h3>
<p>This example creates department-based groups and test users:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">users-groups-test-blueprint</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="nt">app.kubernetes.io/component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blueprint</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">  </span><span class="nt">users-groups-test-setup.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="no">version: 1</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="no">metadata:</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">      </span><span class="no">name: &quot;Test Users and Groups Setup&quot;</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="no">entries:</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">      </span><span class="no"># Create groups first</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">      </span><span class="no">- model: authentik_core.group</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">          </span><span class="no">name: &quot;IT Department&quot;</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">          </span><span class="no">name: &quot;IT Department&quot;</span>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="w">          </span><span class="no">is_superuser: false</span>
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">          </span><span class="no">attributes:</span>
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">            </span><span class="no">department: &quot;IT&quot;</span>
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="w">            </span><span class="no">type: &quot;department_group&quot;</span>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="w">      </span><span class="no"># Create users and assign to groups</span>
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="w">      </span><span class="no">- model: authentik_core.user</span>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="w">        </span><span class="no">state: present</span>
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="w">        </span><span class="no">identifiers:</span>
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="w">          </span><span class="no">username: &quot;john.doe&quot;</span>
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="w">        </span><span class="no">attrs:</span>
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="w">          </span><span class="no">username: &quot;john.doe&quot;</span>
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="w">          </span><span class="no">name: &quot;John Doe&quot;</span>
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="w">          </span><span class="no">email: &quot;john.doe@company.com&quot;</span>
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="w">          </span><span class="no">password: &quot;TempPassword123&quot;</span>
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a><span class="w">          </span><span class="no">is_active: true</span>
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a><span class="w">          </span><span class="no">groups:</span>
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a><span class="w">            </span><span class="no">- !Find [authentik_core.group, [name, &quot;IT Department&quot;]]</span>
</code></pre></div>
<p><strong>Key Points:</strong>
- Groups must be created before users that reference them
- Use <code>!Find</code> to assign users to groups
- Custom attributes can be added for additional metadata</p>
<hr />
<h2 id="blueprint-development-methodology">Blueprint Development Methodology<a class="headerlink" href="#blueprint-development-methodology" title="Permanent link">&para;</a></h2>
<h3 id="when-blueprint-documentation-is-insufficient">When Blueprint Documentation is Insufficient<a class="headerlink" href="#when-blueprint-documentation-is-insufficient" title="Permanent link">&para;</a></h3>
<p>Often, authentik's blueprint documentation lacks specific examples for complex configurations. This section describes a proven methodology for <strong>reverse engineering working configurations</strong> into blueprints.</p>
<h3 id="the-manual-setup-export-method">The Manual Setup + Export Method<a class="headerlink" href="#the-manual-setup-export-method" title="Permanent link">&para;</a></h3>
<p>This approach involves:
1. <strong>Manual Configuration</strong> in the Authentik UI
2. <strong>Export the Working Configuration</strong> using Django management commands
3. <strong>Analyze the Export</strong> to understand the correct structure
4. <strong>Create the Blueprint</strong> based on the working configuration</p>
<h3 id="step-by-step-process">Step-by-Step Process<a class="headerlink" href="#step-by-step-process" title="Permanent link">&para;</a></h3>
<h4 id="1-create-manual-configuration">1. Create Manual Configuration<a class="headerlink" href="#1-create-manual-configuration" title="Permanent link">&para;</a></h4>
<p>Set up the desired configuration manually through the Authentik web UI:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Example: OpenWebUI OAuth2 Setup</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="c1"># 1. Navigate to authentik.localhost</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># 2. Applications &gt; Applications &gt; Create with Provider</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># 3. Configure Provider Type: OAuth2/OpenID Connect</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="c1"># 4. Set all required parameters through the UI</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="c1"># 5. Test the configuration works</span>
</code></pre></div>
<h4 id="2-export-working-configuration">2. Export Working Configuration<a class="headerlink" href="#2-export-working-configuration" title="Permanent link">&para;</a></h4>
<p>Use Django management commands to export the working configuration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># Log into the authentik worker pod</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-worker<span class="w"> </span>--<span class="w"> </span>/bin/bash
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="c1"># Export all blueprints to see the structure</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>python<span class="w"> </span>manage.py<span class="w"> </span>export_blueprint<span class="w"> </span>&gt;<span class="w"> </span>/tmp/all-blueprints.yaml
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1"># Export specific object types</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_providers_oauth2.oauth2provider<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/oauth2-providers.yaml
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_core.application<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/applications.yaml
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="c1"># Find the object ID using Django shell</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>python<span class="w"> </span>manage.py<span class="w"> </span>shell<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="s2">from authentik.providers.oauth2.models import OAuth2Provider</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="s2">from authentik.core.models import Application</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="s2"># Find your provider</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="s2">provider = OAuth2Provider.objects.get(name=&#39;openwebui-dev-provider&#39;)</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="s2">print(f&#39;Provider ID: {provider.pk}&#39;)</span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="s2">print(f&#39;Client Type: {provider.client_type}&#39;)</span>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="s2">print(f&#39;Redirect URIs: {provider.redirect_uris}&#39;)</span>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="s2"># Find your application</span>
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="s2">app = Application.objects.get(slug=&#39;openwebui-dev&#39;)</span>
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="s2">print(f&#39;Application ID: {app.pk}&#39;)</span>
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="s2">&quot;</span>
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a>
<a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="c1"># Export specific object by ID</span>
<a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_providers_oauth2.oauth2provider<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>--pk<span class="o">=</span><span class="m">4</span><span class="w"> </span>&gt;<span class="w"> </span>/tmp/specific-provider.yaml
</code></pre></div>
<h4 id="3-analyze-export-files">3. Analyze Export Files<a class="headerlink" href="#3-analyze-export-files" title="Permanent link">&para;</a></h4>
<p>Copy the export files from the pod and analyze them:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># Copy exports to local machine</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>kubectl<span class="w"> </span>cp<span class="w"> </span>authentik/deployment/authentik-worker:/tmp/oauth2-providers.yaml<span class="w"> </span>./oauth2-export.yaml
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>kubectl<span class="w"> </span>cp<span class="w"> </span>authentik/deployment/authentik-worker:/tmp/applications.yaml<span class="w"> </span>./app-export.yaml
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="c1"># Examine the structure</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>cat<span class="w"> </span>oauth2-export.yaml
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>cat<span class="w"> </span>app-export.yaml
</code></pre></div>
<h4 id="4-identify-key-differences">4. Identify Key Differences<a class="headerlink" href="#4-identify-key-differences" title="Permanent link">&para;</a></h4>
<p>Compare your failed blueprint attempts with the working export:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># Working export shows:</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">redirect_uris</span><span class="p">:</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://openwebui.localhost/oauth/oidc/callback</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="nt">matching_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strict</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="c1"># vs failed blueprint had:</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="nt">redirect_uris</span><span class="p">:</span><span class="w"> </span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://openwebui.localhost/oauth/oidc/callback</span>
</code></pre></div>
<h4 id="5-create-corrected-blueprint">5. Create Corrected Blueprint<a class="headerlink" href="#5-create-corrected-blueprint" title="Permanent link">&para;</a></h4>
<p>Build the blueprint using the exact working configuration format:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># Use the complex object format that actually works</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nt">redirect_uris</span><span class="p">:</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matching_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strict</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://openwebui.localhost/oauth/oidc/callback</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="c1"># Include all the hidden settings from exports</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="nt">access_code_validity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minutes=1</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="nt">access_token_validity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minutes=5</span><span class="w">  </span><span class="c1"># This was missing!</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="nt">refresh_token_validity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">days=30</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="nt">sub_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hashed_user_id</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="nt">issuer_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">per_provider</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a><span class="nt">include_claims_in_id_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h3 id="export-commands-quick-reference">Export Commands Quick Reference<a class="headerlink" href="#export-commands-quick-reference" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Essential export commands for blueprint development:</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="c1"># 1. Get into authentik worker pod</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-worker<span class="w"> </span>--<span class="w"> </span>/bin/bash
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="c1"># 2. Export all objects (big file, useful for finding relationships)</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>python<span class="w"> </span>manage.py<span class="w"> </span>export_blueprint<span class="w"> </span>&gt;<span class="w"> </span>/tmp/all-blueprints.yaml
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="c1"># 3. Export specific model types</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_providers_oauth2.oauth2provider<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/oauth2-providers.yaml
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_providers_proxy.proxyprovider<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/proxy-providers.yaml
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_core.application<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/applications.yaml
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_core.user<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/users.yaml
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_core.group<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>&gt;<span class="w"> </span>/tmp/groups.yaml
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="c1"># 4. Find specific object IDs using Django shell</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>python<span class="w"> </span>manage.py<span class="w"> </span>shell<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="s2">from authentik.providers.oauth2.models import OAuth2Provider</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="s2"># Replace with your object query</span>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="s2">obj = OAuth2Provider.objects.get(name=&#39;your-provider-name&#39;)</span>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="s2">print(f&#39;Object ID: {obj.pk}&#39;)</span>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="s2">print(f&#39;Key attributes: {obj.__dict__}&#39;)</span>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="s2">&quot;</span>
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="c1"># 5. Export specific object by ID</span>
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>model_name<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>--pk<span class="o">=</span>object_id<span class="w"> </span>&gt;<span class="w"> </span>/tmp/specific-object.yaml
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="c1"># 6. Copy files back to local machine</span>
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>kubectl<span class="w"> </span>cp<span class="w"> </span>authentik/deployment/authentik-worker:/tmp/file.yaml<span class="w"> </span>./local-file.yaml
</code></pre></div>
<h3 id="common-models-for-export">Common Models for Export<a class="headerlink" href="#common-models-for-export" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Model Path</th>
<th>Purpose</th>
<th>Export Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authentik_providers_oauth2.oauth2provider</code></td>
<td>OAuth2/OIDC providers</td>
<td><code>python manage.py dumpdata authentik_providers_oauth2.oauth2provider --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_providers_proxy.proxyprovider</code></td>
<td>Proxy providers</td>
<td><code>python manage.py dumpdata authentik_providers_proxy.proxyprovider --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_providers_saml.samlprovider</code></td>
<td>SAML providers</td>
<td><code>python manage.py dumpdata authentik_providers_saml.samlprovider --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_core.application</code></td>
<td>Applications</td>
<td><code>python manage.py dumpdata authentik_core.application --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_core.user</code></td>
<td>Users</td>
<td><code>python manage.py dumpdata authentik_core.user --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_core.group</code></td>
<td>Groups</td>
<td><code>python manage.py dumpdata authentik_core.group --format=yaml</code></td>
</tr>
<tr>
<td><code>authentik_flows.flow</code></td>
<td>Flows</td>
<td><code>python manage.py dumpdata authentik_flows.flow --format=yaml</code></td>
</tr>
</tbody>
</table>
<h3 id="success-indicators">Success Indicators<a class="headerlink" href="#success-indicators" title="Permanent link">&para;</a></h3>
<p>You know your reverse engineering worked when:</p>
<ol>
<li><strong>Blueprint applies without errors</strong></li>
<li><strong>Objects appear in Authentik UI</strong></li>
<li><strong>Configuration matches your manual setup exactly</strong></li>
<li><strong>Application authentication works as expected</strong></li>
</ol>
<h3 id="documentation-benefits">Documentation Benefits<a class="headerlink" href="#documentation-benefits" title="Permanent link">&para;</a></h3>
<p>Always document your reverse engineering process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Include in blueprint comments:</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="c1"># This blueprint was corrected based on working manual setup:</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="c1"># Export commands used to capture working config:</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="c1"># kubectl exec -it -n authentik deployment/authentik-worker -- python manage.py dumpdata authentik_providers_oauth2.oauth2provider --format=yaml --pk=4</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="c1">#</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="c1"># Manual setup steps for reference:</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="c1"># 1. Applications &gt; Applications &gt; Create with Provider</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="c1"># 2. Name: &quot;openwebui-dev&quot;</span>
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="c1"># [... detailed manual steps ...]</span>
</code></pre></div>
<p>This methodology ensures you can reliably create blueprints for any Authentik configuration, regardless of documentation gaps.</p>
<hr />
<h2 id="common-use-cases">Common Use Cases<a class="headerlink" href="#common-use-cases" title="Permanent link">&para;</a></h2>
<h3 id="1-oidc-application-setup-simple">1. OIDC Application Setup (Simple)<a class="headerlink" href="#1-oidc-application-setup-simple" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_providers_oauth2.oauth2provider</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-oidc-app-provider&quot;</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-oidc-app-provider&quot;</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">      </span><span class="nt">client_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;confidential&quot;</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-oidc-app&quot;</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">      </span><span class="nt">authorization_flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default-provider-authorization-implicit-consent</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-oidc-app&quot;</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">OIDC</span><span class="nv"> </span><span class="s">App&quot;</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_oauth2.oauth2provider</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">my-oidc-app-provider</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h3 id="2-saml-application-setup">2. SAML Application Setup<a class="headerlink" href="#2-saml-application-setup" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_providers_saml.samlprovider</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-saml-app-provider&quot;</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-saml-app-provider&quot;</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">      </span><span class="nt">acs_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://app.example.com/saml/acs&quot;</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">      </span><span class="nt">issuer</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://auth.example.com&quot;</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">      </span><span class="nt">sp_binding</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post&quot;</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">      </span><span class="nt">authorization_flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default-provider-authorization-implicit-consent</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.application</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-saml-app&quot;</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">SAML</span><span class="nv"> </span><span class="s">App&quot;</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_saml.samlprovider</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">my-saml-app-provider</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h3 id="3-bulk-user-creation">3. Bulk User Creation<a class="headerlink" href="#3-bulk-user-creation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.group</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Employees&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Employees&quot;</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">  </span><span class="c1"># Use context for parameterized user creation</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_core.user</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">      </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">email</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="kt">!Context</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">full_name</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">      </span><span class="nt">is_active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">      </span><span class="nt">groups</span><span class="p">:</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_core.group</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Employees&quot;</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h3 id="4-custom-flow-creation">4. Custom Flow Creation<a class="headerlink" href="#4-custom-flow-creation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">entries</span><span class="p">:</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_flows.flow</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">      </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom-auth-flow&quot;</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom_flow</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Custom</span><span class="nv"> </span><span class="s">Authentication&quot;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">      </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Custom</span><span class="nv"> </span><span class="s">Login&quot;</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">      </span><span class="nt">designation</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;authentication&quot;</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_stages_identification.identificationstage</span>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom-identification&quot;</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">identification_stage</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik_flows.flowstagebinding</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="w">    </span><span class="nt">identifiers</span><span class="p">:</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="kt">!KeyOf</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom_flow</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="w">      </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="kt">!KeyOf</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">identification_stage</span>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a><span class="w">      </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div>
<hr />
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="file-organization">File Organization<a class="headerlink" href="#file-organization" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Use descriptive file names</strong>: <code>073-authentik-whoami-blueprint.yaml</code></li>
<li><strong>Include comprehensive headers</strong> with description, usage, and prerequisites</li>
<li><strong>Group related configurations</strong> in single blueprints when logical</li>
</ol>
<h3 id="documentation-standards">Documentation Standards<a class="headerlink" href="#documentation-standards" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># File: manifests/XXX-authentik-[purpose]-blueprint.yaml</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="c1">#</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="c1"># Description:</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c1"># Brief description of what this blueprint does</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="c1">#</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="c1"># Usage:</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="c1">#   kubectl apply -f XXX-authentik-[purpose]-blueprint.yaml</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="c1">#</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="c1"># Prerequisites:</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="c1"># - List prerequisites here</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="c1">#</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="c1"># This blueprint replaces these manual UI steps:</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="c1"># 1. Step 1</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="c1"># 2. Step 2</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="c1"># ...</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="c1">#</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="c1"># Development notes:</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="c1"># - Include reverse engineering details if used</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="c1"># - Document export commands used</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="c1"># - Note any special configuration requirements</span>
</code></pre></div>
<h3 id="dependency-management">Dependency Management<a class="headerlink" href="#dependency-management" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Order matters</strong>: Create referenced objects first</li>
<li><strong>Use !Find for cross-references</strong>: Don't hardcode IDs</li>
<li><strong>Consider using !KeyOf</strong> for objects in the same blueprint</li>
</ol>
<h3 id="security-considerations">Security Considerations<a class="headerlink" href="#security-considerations" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Avoid hardcoded secrets</strong> in blueprints</li>
<li><strong>Use !Env for sensitive data</strong>: <code>password: !Env SECRET_PASSWORD</code></li>
<li><strong>Mark test blueprints clearly</strong>: Include environment indicators</li>
<li><strong>Use proper RBAC</strong>: Don't give excessive permissions</li>
</ol>
<h3 id="testing-and-validation">Testing and Validation<a class="headerlink" href="#testing-and-validation" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Use schema validation</strong>: Include schema comment at top of files</li>
<li><strong>Test in development first</strong>: Use separate namespaces/environments</li>
<li><strong>Verify object creation</strong>: Check authentik UI after applying</li>
<li><strong>Monitor blueprint status</strong>: Use kubectl to check ConfigMap status</li>
</ol>
<hr />
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="common-issues">Common Issues<a class="headerlink" href="#common-issues" title="Permanent link">&para;</a></h3>
<h4 id="blueprint-not-applied">Blueprint Not Applied<a class="headerlink" href="#blueprint-not-applied" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: Blueprint exists but objects aren't created</p>
<p><strong>Solutions</strong>:
1. Check labels on ConfigMap:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
2. Verify authentik can read the ConfigMap
3. Check authentik logs for blueprint errors</p>
<h4 id="object-not-found-errors">Object Not Found Errors<a class="headerlink" href="#object-not-found-errors" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: <code>!Find</code> or <code>!KeyOf</code> tags failing</p>
<p><strong>Solutions</strong>:
1. Ensure referenced objects are created first
2. Check identifiers match exactly
3. Verify object actually exists in authentik</p>
<h4 id="invalid-blueprint-format">Invalid Blueprint Format<a class="headerlink" href="#invalid-blueprint-format" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: Blueprint validation errors</p>
<p><strong>Solutions</strong>:
1. Use schema validation in your editor
2. Check YAML syntax
3. Verify all required fields are present
4. <strong>Use the reverse engineering method</strong> to get correct format</p>
<h4 id="complex-configuration-failures">Complex Configuration Failures<a class="headerlink" href="#complex-configuration-failures" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: Blueprint applies but configuration doesn't work</p>
<p><strong>Solutions</strong>:
1. <strong>Apply the reverse engineering methodology</strong>:
   - Set up manually in UI
   - Export working configuration
   - Compare with your blueprint
   - Update blueprint with exact working values
2. Check for missing required attributes
3. Verify object relationships are correct</p>
<h4 id="permission-denied">Permission Denied<a class="headerlink" href="#permission-denied" title="Permanent link">&para;</a></h4>
<p><strong>Symptoms</strong>: Blueprint can't create objects</p>
<p><strong>Solutions</strong>:
1. Check authentik service account permissions
2. Verify RBAC configuration
3. Check namespace permissions</p>
<h3 id="advanced-debugging">Advanced Debugging<a class="headerlink" href="#advanced-debugging" title="Permanent link">&para;</a></h3>
<h4 id="using-export-commands-for-debugging">Using Export Commands for Debugging<a class="headerlink" href="#using-export-commands-for-debugging" title="Permanent link">&para;</a></h4>
<p>When blueprints fail, use exports to understand the current state:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># Check what actually got created</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-worker<span class="w"> </span>--<span class="w"> </span>python<span class="w"> </span>manage.py<span class="w"> </span>shell<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="s2">from authentik.providers.oauth2.models import OAuth2Provider</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="s2">from authentik.core.models import Application</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="s2"># List all providers to see what exists</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="s2">for p in OAuth2Provider.objects.all():</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="s2">    print(f&#39;Provider: {p.name} (ID: {p.pk})&#39;)</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="s2"># List all applications</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="s2">for a in Application.objects.all():</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="s2">    print(f&#39;Application: {a.name} (Slug: {a.slug})&#39;)</span>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="s2">&quot;</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="c1"># Export failed/partial configuration</span>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>python<span class="w"> </span>manage.py<span class="w"> </span>dumpdata<span class="w"> </span>authentik_providers_oauth2.oauth2provider<span class="w"> </span>--format<span class="o">=</span>yaml<span class="w"> </span>--pk<span class="o">=</span>problem_id<span class="w"> </span>&gt;<span class="w"> </span>/tmp/debug.yaml
</code></pre></div>
<h3 id="useful-commands">Useful Commands<a class="headerlink" href="#useful-commands" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1"># Check ConfigMap status</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>kubectl<span class="w"> </span>get<span class="w"> </span>configmap<span class="w"> </span>-n<span class="w"> </span>authentik
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="c1"># View ConfigMap contents</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>kubectl<span class="w"> </span>describe<span class="w"> </span>configmap<span class="w"> </span>whoami-forward-auth-blueprint<span class="w"> </span>-n<span class="w"> </span>authentik
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># Check authentik logs for blueprint processing</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-server<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>blueprint
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="c1"># Check worker logs for Django errors</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>kubectl<span class="w"> </span>logs<span class="w"> </span>-n<span class="w"> </span>authentik<span class="w"> </span>deployment/authentik-worker
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="c1"># Validate YAML locally</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a>yamllint<span class="w"> </span>blueprint.yaml
</code></pre></div>
<hr />
<h2 id="quick-reference">Quick Reference<a class="headerlink" href="#quick-reference" title="Permanent link">&para;</a></h2>
<h3 id="essential-models">Essential Models<a class="headerlink" href="#essential-models" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Model</th>
<th>Purpose</th>
<th>Key Identifiers</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authentik_core.application</code></td>
<td>Applications</td>
<td><code>slug</code></td>
</tr>
<tr>
<td><code>authentik_core.user</code></td>
<td>Users</td>
<td><code>username</code></td>
</tr>
<tr>
<td><code>authentik_core.group</code></td>
<td>Groups</td>
<td><code>name</code></td>
</tr>
<tr>
<td><code>authentik_providers_proxy.proxyprovider</code></td>
<td>Proxy providers</td>
<td><code>name</code></td>
</tr>
<tr>
<td><code>authentik_providers_oauth2.oauth2provider</code></td>
<td>OIDC providers</td>
<td><code>name</code></td>
</tr>
<tr>
<td><code>authentik_providers_saml.samlprovider</code></td>
<td>SAML providers</td>
<td><code>name</code></td>
</tr>
<tr>
<td><code>authentik_outposts.outpost</code></td>
<td>Outposts</td>
<td><code>name</code></td>
</tr>
<tr>
<td><code>authentik_flows.flow</code></td>
<td>Flows</td>
<td><code>slug</code></td>
</tr>
</tbody>
</table>
<h3 id="common-attributes">Common Attributes<a class="headerlink" href="#common-attributes" title="Permanent link">&para;</a></h3>
<h4 id="application-authentik_coreapplication">Application (<code>authentik_core.application</code>)<a class="headerlink" href="#application-authentik_coreapplication" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;App</span><span class="nv"> </span><span class="s">Name&quot;</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">  </span><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;app-slug&quot;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">  </span><span class="nt">meta_launch_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://app.example.com&quot;</span><span class="w">  </span><span class="c1"># Can be empty &quot;&quot;</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">  </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">provider_model</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">provider-name</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">  </span><span class="nt">policy_engine_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">any</span>
</code></pre></div>
<h4 id="oauth2-provider-authentik_providers_oauth2oauth2provider">OAuth2 Provider (<code>authentik_providers_oauth2.oauth2provider</code>)<a class="headerlink" href="#oauth2-provider-authentik_providers_oauth2oauth2provider" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;provider-name&quot;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">  </span><span class="nt">client_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;confidential&quot;</span><span class="w">  </span><span class="c1"># or &quot;public&quot;</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">  </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-client-id&quot;</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">  </span><span class="nt">client_secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-client-secret&quot;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">  </span><span class="nt">redirect_uris</span><span class="p">:</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">matching_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strict</span><span class="w">  </span><span class="c1"># Important: complex format often required</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://app.example.com/callback&quot;</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">  </span><span class="nt">access_code_validity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minutes=1&quot;</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">  </span><span class="nt">access_token_validity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hours=1&quot;</span><span class="w">  </span><span class="c1"># Or minutes=5 for short-lived</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">  </span><span class="nt">refresh_token_validity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;days=30&quot;</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w">  </span><span class="nt">sub_mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hashed_user_id&quot;</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="w">  </span><span class="nt">issuer_mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;per_provider&quot;</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w">  </span><span class="nt">include_claims_in_id_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">  </span><span class="nt">authorization_flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default-provider-authorization-implicit-consent</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="w">  </span><span class="nt">invalidation_flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default-provider-invalidation-flow</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">  </span><span class="nt">signing_key</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_crypto.certificatekeypair</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">authentik Self-signed Certificate</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w">  </span><span class="nt">property_mappings</span><span class="p">:</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_oauth2.scopemapping</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;authentik</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">OAuth</span><span class="nv"> </span><span class="s">Mapping:</span><span class="nv"> </span><span class="s">OpenID</span><span class="nv"> </span><span class="s">&#39;openid&#39;&quot;</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_oauth2.scopemapping</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;authentik</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">OAuth</span><span class="nv"> </span><span class="s">Mapping:</span><span class="nv"> </span><span class="s">OpenID</span><span class="nv"> </span><span class="s">&#39;email&#39;&quot;</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_providers_oauth2.scopemapping</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;authentik</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">OAuth</span><span class="nv"> </span><span class="s">Mapping:</span><span class="nv"> </span><span class="s">OpenID</span><span class="nv"> </span><span class="s">&#39;profile&#39;&quot;</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h4 id="proxy-provider-authentik_providers_proxyproxyprovider">Proxy Provider (<code>authentik_providers_proxy.proxyprovider</code>)<a class="headerlink" href="#proxy-provider-authentik_providers_proxyproxyprovider" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;provider-name&quot;</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;forward_single&quot;</span><span class="w">  </span><span class="c1"># or &quot;forward_domain&quot;, &quot;proxy&quot;</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">  </span><span class="nt">external_host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://app.example.com&quot;</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">  </span><span class="nt">authorization_flow</span><span class="p">:</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_flows.flow</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">slug</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">flow-slug</span><span class="p p-Indicator">]]</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">  </span><span class="nt">access_token_validity</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hours=24&quot;</span>
</code></pre></div>
<h4 id="user-authentik_coreuser">User (<code>authentik_core.user</code>)<a class="headerlink" href="#user-authentik_coreuser" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;username&quot;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">  </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user@example.com&quot;</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Full</span><span class="nv"> </span><span class="s">Name&quot;</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;password&quot;</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">  </span><span class="nt">is_active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">  </span><span class="nt">groups</span><span class="p">:</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!Find</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">authentik_core.group</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">name</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Group</span><span class="nv"> </span><span class="s">Name&quot;</span><span class="p p-Indicator">]]</span>
</code></pre></div>
<h4 id="group-authentik_coregroup">Group (<code>authentik_core.group</code>)<a class="headerlink" href="#group-authentik_coregroup" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">attrs</span><span class="p">:</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Group</span><span class="nv"> </span><span class="s">Name&quot;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">  </span><span class="nt">is_superuser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">  </span><span class="nt">attributes</span><span class="p">:</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">    </span><span class="nt">custom_field</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;value&quot;</span>
</code></pre></div>
<h3 id="template-checklist">Template Checklist<a class="headerlink" href="#template-checklist" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] Schema comment at top</li>
<li>[ ] Version set to 1</li>
<li>[ ] Metadata name defined</li>
<li>[ ] Proper instantiate label</li>
<li>[ ] All dependencies ordered correctly</li>
<li>[ ] Identifiers use unique fields</li>
<li>[ ] States defined appropriately</li>
<li>[ ] Documentation header complete</li>
<li>[ ] Reverse engineering methodology documented if used</li>
</ul>
<h3 id="file-template">File Template<a class="headerlink" href="#file-template" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1"># File: manifests/XXX-authentik-[purpose]-blueprint.yaml</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="c1">#</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="c1"># Description: [What this blueprint does]</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="c1"># Usage: kubectl apply -f XXX-authentik-[purpose]-blueprint.yaml</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="c1"># Prerequisites: [List prerequisites]</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="c1">#</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="c1"># Manual setup steps for reference:</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="c1"># [Include detailed UI steps for fallback/troubleshooting]</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="c1">#</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="c1"># Development methodology:</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="c1"># [If reverse engineered, include export commands used]</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">blueprint-name</span><span class="p p-Indicator">]</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">authentik</span>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="w">    </span><span class="nt">app.kubernetes.io/component</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blueprint</span>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">    </span><span class="nt">blueprints.goauthentik.io/instantiate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="w">  </span><span class="nt">blueprint.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="w">    </span><span class="no"># yaml-language-server: $schema=https://goauthentik.io/blueprints/schema.json</span>
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="w">    </span><span class="no">version: 1</span>
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="w">    </span><span class="no">metadata:</span>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="w">      </span><span class="no">name: &quot;[Blueprint Name]&quot;</span>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="w">      </span><span class="no">labels:</span>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="w">        </span><span class="no">blueprints.goauthentik.io/instantiate: &quot;true&quot;</span>
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a>
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="w">    </span><span class="no">context: {}</span>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="w">    </span><span class="no">entries:</span>
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="w">      </span><span class="no"># Your entries here</span>
</code></pre></div>
<hr />
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.goauthentik.io/customize/blueprints/">Official Authentik Blueprint Documentation</a></li>
<li><a href="https://goauthentik.io/blueprints/schema.json">Blueprint Schema</a></li>
<li><a href="https://github.com/goauthentik/authentik/tree/main/blueprints/example">Example Blueprints</a></li>
<li><a href="https://docs.goauthentik.io/customize/blueprints/v1/tags/">YAML Custom Tags</a></li>
</ul>
<hr />
<p><em>Last updated: September 2025</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/terchris/urbalurba-infrastructure" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>