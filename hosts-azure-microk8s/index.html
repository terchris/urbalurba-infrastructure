
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Complete datacenter on your laptop - Kubernetes infrastructure for local development and production">
      
      
      
        <link rel="canonical" href="https://terchris.github.io/urbalurba-infrastructure/hosts-azure-microk8s/">
      
      
        <link rel="prev" href="../hosts-azure-aks/">
      
      
        <link rel="next" href="../hosts-multipass-microk8s/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Azure MicroK8s - Urbalurba Infrastructure</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#azure-microk8s-host-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Urbalurba Infrastructure" class="md-header__button md-logo" aria-label="Urbalurba Infrastructure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Urbalurba Infrastructure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Azure MicroK8s
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/terchris/urbalurba-infrastructure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    terchris/urbalurba-infrastructure
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Urbalurba Infrastructure" class="md-nav__button md-logo" aria-label="Urbalurba Infrastructure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Urbalurba Infrastructure
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/terchris/urbalurba-infrastructure" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    terchris/urbalurba-infrastructure
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview-system-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Hosts & Platforms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hosts & Platforms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-rancher-kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rancher Desktop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-azure-aks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure AKS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Azure MicroK8s
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure MicroK8s
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ“‹ Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ“‹ Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-setup-with-enhanced-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automated Setup with Enhanced Script
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automated Setup with Enhanced Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-process_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-creation-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running the Creation Script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloud-init-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud-Init Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing the VM
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deleting the VM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-installation-for-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Installation (For Troubleshooting)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manual Installation (For Troubleshooting)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-set-up-the-azure-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Set Up the Azure Environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-verify-tailscale-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Verify Tailscale Connectivity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-format-and-mount-data-disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Format and Mount Data Disk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-verify-microk8s-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Verify MicroK8s Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-init-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud-Init Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tailscale-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tailscale Connectivity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-access-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Access Problems
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-output-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Output Logs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample Output Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-vm-example-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create VM Example Log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inventory-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inventory log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-example-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cleanup Example Log
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-multipass-microk8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multipass MicroK8s
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-raspberry-microk8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-cloud-init-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud Init
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts-cloud-init-secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud Init Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Packages
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Packages
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI & ML
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI & ML
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-litellm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiteLLM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-litellm-client-key-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LiteLLM Client Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-openwebui-model-access-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenWebUI Model Access
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-ai-environment-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Authentication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-auth10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth10 Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-auth10-developer-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-blueprints-syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Blueprints Syntax
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-technical-implementation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Implementation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-auth-authentik-testusers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Users
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-core-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-core-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nginx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Databases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Databases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-postgresql-container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Container
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-mongodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MongoDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-databases-qdrant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qdrant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Science
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Science
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-jupyterhub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JupyterHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-spark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-datascience-unitycatalog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Unity Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-argocd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ArgoCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-development-templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Management
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-pgadmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    pgAdmin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-rabbitmq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RabbitMQ Admin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-management-redisinsight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RedisInsight
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Monitoring
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prometheus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-grafana/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grafana
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-loki/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loki
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-otel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenTelemetry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-monitoring-sovdev-logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SovDev Logger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Message Queues
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Message Queues
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-rabbitmq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RabbitMQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-queues-redis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Search
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Search
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-search-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../package-search-elasticsearch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Networking
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Networking
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-tailscale-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tailscale Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-tailscale-networkisolation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tailscale Network Isolation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking-cloudflare-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloudflare Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Provision Host
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Provision Host
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-rancher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rancher Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../provision-host-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Rules & Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rules & Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-automated-kubernetes-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-ingress-traefik/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingress & Traefik
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-secrets-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-provisioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Provisioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-naming-conventions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Naming Conventions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-git-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Git Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-development-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rules-howtodoc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation (Legacy)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manifests-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manifests
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../secrets-management-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        ðŸ“‹ Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ðŸ“‹ Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-setup-with-enhanced-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Automated Setup with Enhanced Script
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automated Setup with Enhanced Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-process_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-creation-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running the Creation Script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloud-init-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud-Init Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Accessing the VM
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deleting-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deleting the VM
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manual-installation-for-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Manual Installation (For Troubleshooting)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Manual Installation (For Troubleshooting)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-set-up-the-azure-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Set Up the Azure Environment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-verify-tailscale-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Verify Tailscale Connectivity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-format-and-mount-data-disk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Format and Mount Data Disk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-verify-microk8s-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Verify MicroK8s Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-init-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cloud-Init Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tailscale-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tailscale Connectivity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-access-problems" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH Access Problems
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample-output-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sample Output Logs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample Output Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-vm-example-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create VM Example Log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inventory-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inventory log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup-example-log" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cleanup Example Log
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="azure-microk8s-host-documentation">Azure MicroK8s Host Documentation<a class="headerlink" href="#azure-microk8s-host-documentation" title="Permanent link">&para;</a></h1>
<p><strong>File</strong>: <code>docs/hosts-azure-microk8s.md</code>
<strong>Purpose</strong>: Deployment guide for Azure VM with MicroK8s using Cloud Adoption Framework (CAF)
<strong>Target Audience</strong>: Infrastructure engineers deploying to Azure environments
<strong>Last Updated</strong>: September 22, 2024</p>
<h2 id="overview">ðŸ“‹ Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This guide covers setting up a VM in Azure using the Cloud Adoption Framework (CAF) with MicroK8s. In a CAF environment, resources are locked down by default, requiring explicit permissions for access. While this enhances security, it adds complexity to the setup process.</p>
<h3 id="key-features"><strong>Key Features</strong><a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Azure VM deployment</strong> with automated MicroK8s installation</li>
<li><strong>CAF compliance</strong> with proper resource group and networking setup</li>
<li><strong>Tailscale VPN integration</strong> for secure remote access</li>
<li><strong>Cloud-init automation</strong> for consistent provisioning</li>
<li><strong>Ansible integration</strong> for ongoing management</li>
</ul>
<h2 id="automated-setup-with-enhanced-script">Automated Setup with Enhanced Script<a class="headerlink" href="#automated-setup-with-enhanced-script" title="Permanent link">&para;</a></h2>
<p>We've created an improved script (<code>01-azure-vm-create-redcross-v2.sh</code>) that handles the entire deployment process, including error handling and detailed feedback.</p>
<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li>Azure subscription with Contributor role access</li>
<li>Tailscale account and network setup</li>
<li>SSH keys for the ansible user</li>
<li><strong>Configuration setup</strong>: Copy the template file and add your Azure credentials (see Configuration section below)</li>
</ul>
<h3 id="deployment-process">Deployment Process<a class="headerlink" href="#deployment-process" title="Permanent link">&para;</a></h3>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p><strong>IMPORTANT</strong>: Before running any deployment scripts, you must configure your Azure credentials:</p>
<ol>
<li>
<p><strong>Copy the template file</strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>hosts/azure-microk8s
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>cp<span class="w"> </span>azure-vm-config-redcross-sandbox.sh-template<span class="w"> </span>azure-vm-config-redcross-sandbox.sh
</code></pre></div></p>
</li>
<li>
<p><strong>Edit the configuration file</strong> and replace placeholder values with your actual Azure information:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>nano<span class="w"> </span>azure-vm-config-redcross-sandbox.sh
</code></pre></div></p>
</li>
</ol>
<p>Replace these placeholder values:
   - <code>TENANT_ID="your-tenant-id"</code> â†’ Your Azure tenant ID
   - <code>SUBSCRIPTION_ID="your-subscription-id"</code> â†’ Your Azure subscription ID
   - <code>your-email@organization.com</code> â†’ Your actual email address
   - <code>your-cost-center</code> â†’ Your organization's cost center</p>
<ol>
<li><strong>Security Note</strong>: The <code>azure-vm-config-redcross-sandbox.sh</code> file contains sensitive information and is automatically excluded from git commits via <code>.gitignore</code>.</li>
</ol>
<h3 id="deployment-process_1">Deployment Process<a class="headerlink" href="#deployment-process_1" title="Permanent link">&para;</a></h3>
<p>The deployment uses these files:</p>
<ul>
<li><strong>VM configuration</strong>: <code>azure-vm-config-redcross-sandbox.sh</code> (created from template above)</li>
<li><strong>VM creation script</strong>: <code>01-azure-vm-create-redcross-v2.sh</code></li>
<li><strong>Ansible inventory</strong>: <code>02-azure-ansible-inventory.sh</code></li>
<li><strong>Resource cleanup</strong>: <code>azure-vm-cleanup-redcross-v2.sh</code></li>
</ul>
<h3 id="running-the-creation-script">Running the Creation Script<a class="headerlink" href="#running-the-creation-script" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>./01-azure-vm-create-redcross-v2.sh<span class="w"> </span>&lt;admin_username&gt;<span class="w"> </span>&lt;admin_password&gt;<span class="w"> </span>&lt;vm_instance&gt;
</code></pre></div>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>./01-azure-vm-create-redcross-v2.sh<span class="w"> </span>ansible<span class="w"> </span>&lt;your-password&gt;<span class="w"> </span>azure-microk8s
</code></pre></div></p>
<p>The script performs these steps:
1. Checks for required configuration files
2. Prompts you to activate your Privileged Identity Management (PIM) role if needed
3. Logs into Azure and sets the subscription
4. Creates resource groups for VM and networking if they don't exist
5. Sets up network components (VNet, subnet, NSG)
6. Creates and configures the VM with MicroK8s
7. Formats and mounts the data disk
8. Verifies Tailscale connectivity
9. Creates cluster information file
10. Tests SSH access through Tailscale
11. Shows MicroK8s status and provides comprehensive summary</p>
<blockquote>
<p><strong>Important</strong>: The script uses cloud-init to configure the VM, including Tailscale setup. The cloud-init file should include a valid Tailscale auth key.</p>
</blockquote>
<h3 id="cloud-init-configuration">Cloud-Init Configuration<a class="headerlink" href="#cloud-init-configuration" title="Permanent link">&para;</a></h3>
<p>The cloud-init file (<code>/mnt/urbalurbadisk/cloud-init/azure-cloud-init.yml</code>) handles initial VM setup:
- Creates the <code>ansible</code> user with SSH key access
- Installs MicroK8s with core add-ons
- Installs and configures Tailscale for secure remote access</p>
<p>For more information about cloud-init configuration, see <code>cloud-init/cloud-init-readme.md</code></p>
<h3 id="accessing-the-vm">Accessing the VM<a class="headerlink" href="#accessing-the-vm" title="Permanent link">&para;</a></h3>
<p>After deployment, access the VM via Tailscale:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ssh<span class="w"> </span>-i<span class="w"> </span>/mnt/urbalurbadisk/secrets/id_rsa_ansible<span class="w"> </span>-F<span class="w"> </span>/dev/null<span class="w"> </span>ansible@&lt;tailscale-ip&gt;
</code></pre></div>
<p>Where <code>&lt;tailscale-ip&gt;</code> is the Tailscale IP displayed at the end of the script execution.</p>
<p>The provision-host (the local container or VM) must also be connected to the Tailscale network to connect over the Tailscale network. For more about Tailscale see <code>networking/vpn-tailscale-howto.md</code></p>
<h3 id="deleting-the-vm">Deleting the VM<a class="headerlink" href="#deleting-the-vm" title="Permanent link">&para;</a></h3>
<p>To remove the VM and associated resources, use the improved cleanup script:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>./azure-vm-cleanup-redcross-v2.sh<span class="w"> </span>&lt;vm_instance&gt;
</code></pre></div>
<p>Example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>./azure-vm-cleanup-redcross-v2.sh<span class="w"> </span>azure-microk8s
</code></pre></div></p>
<p>The cleanup script will:
1. Prompt you to activate your PIM role if needed
2. Log into Azure and set the subscription
3. List all resources that will be deleted and ask for confirmation
4. If the VM is the only one in its resource group, offer to delete the entire group (faster)
5. Remove all associated resources (VM, disks, NIC, NSG)
6. Optionally wait to verify that the resource group has been fully deleted
7. Remind you to manually delete the machine from your Tailscale network</p>
<h2 id="manual-installation-for-troubleshooting">Manual Installation (For Troubleshooting)<a class="headerlink" href="#manual-installation-for-troubleshooting" title="Permanent link">&para;</a></h2>
<p>If you need to troubleshoot or understand the underlying process, here are the manual steps:</p>
<h3 id="step-1-set-up-the-azure-environment">Step 1: Set Up the Azure Environment<a class="headerlink" href="#step-1-set-up-the-azure-environment" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Create resource groups:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--location<span class="w"> </span>westeurope
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>rg-sandbox-network-weu<span class="w"> </span>--location<span class="w"> </span>westeurope
</code></pre></div></p>
</li>
<li>
<p>Create networking components:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>az<span class="w"> </span>network<span class="w"> </span>vnet<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-network-weu<span class="w"> </span>--name<span class="w"> </span>vnet-sandbox-network-weu<span class="w"> </span>--address-prefix<span class="w"> </span><span class="m">10</span>.2.0.0/16<span class="w"> </span>--location<span class="w"> </span>westeurope
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>az<span class="w"> </span>network<span class="w"> </span>vnet<span class="w"> </span>subnet<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-network-weu<span class="w"> </span>--vnet-name<span class="w"> </span>vnet-sandbox-network-weu<span class="w"> </span>--name<span class="w"> </span>sub-sandbox-k8s-weu<span class="w"> </span>--address-prefix<span class="w"> </span><span class="m">10</span>.2.1.0/24
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>az<span class="w"> </span>network<span class="w"> </span>nsg<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>nsg-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--location<span class="w"> </span>westeurope
</code></pre></div></p>
</li>
<li>
<p>Create network interface:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>az<span class="w"> </span>network<span class="w"> </span>nic<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>nic-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--subnet<span class="w"> </span>/subscriptions/&lt;subscription-id&gt;/resourceGroups/rg-sandbox-network-weu/providers/Microsoft.Network/virtualNetworks/vnet-sandbox-network-weu/subnets/sub-sandbox-k8s-weu<span class="w"> </span>--network-security-group<span class="w"> </span>nsg-sandbox-k8s-azure-microk8s-weu
</code></pre></div></p>
</li>
<li>
<p>Create VM with cloud-init:
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>az<span class="w"> </span>vm<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--image<span class="w"> </span>Ubuntu2204<span class="w"> </span>--size<span class="w"> </span>Standard_B2ms<span class="w"> </span>--location<span class="w"> </span>westeurope<span class="w"> </span>--admin-username<span class="w"> </span><span class="s2">&quot;ansible&quot;</span><span class="w"> </span>--admin-password<span class="w"> </span><span class="s2">&quot;&lt;your-password&gt;&quot;</span><span class="w"> </span>--authentication-type<span class="w"> </span>password<span class="w"> </span>--storage-sku<span class="w"> </span>Standard_LRS<span class="w"> </span>--data-disk-sizes-gb<span class="w"> </span><span class="m">50</span><span class="w"> </span>--nics<span class="w"> </span>nic-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--custom-data<span class="w"> </span>@/mnt/urbalurbadisk/cloud-init/azure-cloud-init.yml
</code></pre></div></p>
</li>
</ol>
<h3 id="step-2-verify-tailscale-connectivity">Step 2: Verify Tailscale Connectivity<a class="headerlink" href="#step-2-verify-tailscale-connectivity" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Check if Tailscale is running on the VM:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;tailscale status&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>Get the Tailscale IP:
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;tailscale ip -4&quot;</span>
</code></pre></div></p>
</li>
<li>
<p>Test SSH access:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>ssh<span class="w"> </span>-i<span class="w"> </span>/mnt/urbalurbadisk/secrets/id_rsa_ansible<span class="w"> </span>-F<span class="w"> </span>/dev/null<span class="w"> </span>ansible@&lt;tailscale-ip&gt;
</code></pre></div></p>
</li>
</ol>
<h3 id="step-3-format-and-mount-data-disk">Step 3: Format and Mount Data Disk<a class="headerlink" href="#step-3-format-and-mount-data-disk" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;sudo parted /dev/sdc --script mklabel gpt mkpart xfspart xfs 0% 100% &amp;&amp; sudo mkfs.xfs /dev/sdc1 &amp;&amp; sudo partprobe /dev/sdc1 &amp;&amp; sudo mkdir -p /mnt/urbalurbadisk &amp;&amp; sudo mount /dev/sdc1 /mnt/urbalurbadisk &amp;&amp; echo &#39;/dev/sdc1 /mnt/urbalurbadisk xfs defaults 0 2&#39; | sudo tee -a /etc/fstab &amp;&amp; sudo chown ansible:ansible /mnt/urbalurbadisk &amp;&amp; sudo chmod 755 /mnt/urbalurbadisk&quot;</span>
</code></pre></div>
<h3 id="step-4-verify-microk8s-installation">Step 4: Verify MicroK8s Installation<a class="headerlink" href="#step-4-verify-microk8s-installation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;microk8s status&quot;</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="cloud-init-issues">Cloud-Init Issues<a class="headerlink" href="#cloud-init-issues" title="Permanent link">&para;</a></h3>
<p>If cloud-init fails, check the logs:
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;cat /var/log/cloud-init-output.log | tail -n 50&quot;</span>
</code></pre></div></p>
<h3 id="tailscale-connectivity">Tailscale Connectivity<a class="headerlink" href="#tailscale-connectivity" title="Permanent link">&para;</a></h3>
<p>If Tailscale isn't connecting:
1. Verify Tailscale installation:
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>az<span class="w"> </span>vm<span class="w"> </span>run-command<span class="w"> </span>invoke<span class="w"> </span>--resource-group<span class="w"> </span>rg-sandbox-k8s-weu<span class="w"> </span>--name<span class="w"> </span>vm-sandbox-k8s-azure-microk8s-weu<span class="w"> </span>--command-id<span class="w"> </span>RunShellScript<span class="w"> </span>--scripts<span class="w"> </span><span class="s2">&quot;which tailscale &amp;&amp; systemctl status tailscaled&quot;</span>
</code></pre></div></p>
<ol>
<li>Check for valid auth keys in your cloud-init file and create a new auth key if needed from the Tailscale admin console.</li>
</ol>
<h3 id="ssh-access-problems">SSH Access Problems<a class="headerlink" href="#ssh-access-problems" title="Permanent link">&para;</a></h3>
<p>If SSH access fails:
1. Verify the SSH key path: <code>/mnt/urbalurbadisk/secrets/id_rsa_ansible</code>
2. Check SSH key permissions: <code>chmod 600 /mnt/urbalurbadisk/secrets/id_rsa_ansible</code>
3. Bypass SSH config with the <code>-F /dev/null</code> option</p>
<h2 id="sample-output-logs">Sample Output Logs<a class="headerlink" href="#sample-output-logs" title="Permanent link">&para;</a></h2>
<h3 id="create-vm-example-log">Create VM Example Log<a class="headerlink" href="#create-vm-example-log" title="Permanent link">&para;</a></h3>
<p>Below is a truncated example of a successful VM creation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>./01-azure-vm-create-redcross-v2.sh ansible Secretp@ssword1 azure-microk8s
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>================================================
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    Azure VM Creation Script v2 (Full Setup)    
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>================================================
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Starting Azure VM creation process for instance: azure-microk8s
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>=== STEP 1: Checking required files and loading configuration ===
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>  â†’ Checking if ./azure-vm-config-redcross-sandbox.sh exists
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>  âœ“ File ./azure-vm-config-redcross-sandbox.sh found
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>  â†’ Checking if /mnt/urbalurbadisk/cloud-init/azure-cloud-init.yml exists
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>  âœ“ File /mnt/urbalurbadisk/cloud-init/azure-cloud-init.yml found
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>  â†’ Loading configuration from ./azure-vm-config-redcross-sandbox.sh
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>  âœ“ Configuration loaded
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>  â†’ Generating resource names
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>Configured variables:
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>  VM Instance Name: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>  VM Resource Group: rg-sandbox-k8s-weu
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>  Network Resource Group: rg-sandbox-network-weu
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>  Subscription ID: &lt;your-subscription-id&gt;
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>=== STEP 1.5: Activating Privileged Identity Management (PIM) role ===
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>IMPORTANT: You need the Contributor role on the Azure subscription to run this script.
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>In Azure this is a ClickOps operation (the M$ guys did not grow up using a command line tool)
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>To activate the Contributor role in Azure:
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>  1) Search for PIM in the Azure portal search bar
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>  2) Click on Microsoft Entra Privileged Identity Management
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>  3) On the PIM page, click &quot;My roles&quot;
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>  4) Click &quot;Azure resources&quot;
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>  5) Click &quot;Activate&quot; next to the Contributor role
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>Alternatively, click on this URL (Ctrl+Click in most terminals):
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>https://portal.azure.com/?feature.msaljs=true#view/Microsoft_Azure_PIMCommon/ActivationMenuBlade/~/azurerbac
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>Search for your resource, click on the name, and then click on the Contributor role.
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>After you have activated your Contributor role, press Enter to continue...
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>Continuing with script execution...
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>=== STEP 2: Setting up Azure CLI and login ===
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>  â†’ Running: Setting login experience
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>  âœ“ Azure CLI: Setting login experience
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>  â†’ Initiating Azure login
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>Please follow these steps to log in:
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>  1. Open a web browser and go to: https://microsoft.com/devicelogin
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>  2. Enter the code that will be displayed below
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>  3. Follow the prompts to complete the login process
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>Running: az login --tenant &lt;your-tenant-id&gt; --use-device-code
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>To sign in, use a web browser to open the page https://microsoft.com/devicelogin and enter the code XXXXXXXX to authenticate.
<a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a>[
<a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a>  {
<a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a>    &quot;cloudName&quot;: &quot;AzureCloud&quot;,
<a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a>    &quot;homeTenantId&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a>    &quot;id&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a>    &quot;isDefault&quot;: true,
<a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>    &quot;managedByTenants&quot;: [],
<a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a>    &quot;name&quot;: &quot;Your Subscription Name&quot;,
<a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a>    &quot;state&quot;: &quot;Enabled&quot;,
<a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>    &quot;tenantId&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a>    &quot;user&quot;: {
<a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a>      &quot;name&quot;: &quot;user@organization.com&quot;,
<a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a>      &quot;type&quot;: &quot;user&quot;
<a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a>    }
<a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a>  }
<a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a>  // Additional subscriptions may appear here
<a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a>]
<a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a>  âœ“ Azure login successful
<a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a>  â†’ Running: Set subscription
<a id="__codelineno-18-67" name="__codelineno-18-67" href="#__codelineno-18-67"></a>  âœ“ Azure: Set subscription
<a id="__codelineno-18-68" name="__codelineno-18-68" href="#__codelineno-18-68"></a>
<a id="__codelineno-18-69" name="__codelineno-18-69" href="#__codelineno-18-69"></a>=== STEP 3: Checking for existing resources ===
<a id="__codelineno-18-70" name="__codelineno-18-70" href="#__codelineno-18-70"></a>  â†’ Checking if VM already exists: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-18-71" name="__codelineno-18-71" href="#__codelineno-18-71"></a>  âœ“ VM does not exist, can proceed with creation
<a id="__codelineno-18-72" name="__codelineno-18-72" href="#__codelineno-18-72"></a>
<a id="__codelineno-18-73" name="__codelineno-18-73" href="#__codelineno-18-73"></a>=== STEP 4: Creating Resource Groups ===
<a id="__codelineno-18-74" name="__codelineno-18-74" href="#__codelineno-18-74"></a>  â†’ Checking if Resource Group rg-sandbox-k8s-weu exists
<a id="__codelineno-18-75" name="__codelineno-18-75" href="#__codelineno-18-75"></a>  â†’ Creating Resource Group: rg-sandbox-k8s-weu in westeurope
<a id="__codelineno-18-76" name="__codelineno-18-76" href="#__codelineno-18-76"></a>  â†’ Running: Create rg-sandbox-k8s-weu
<a id="__codelineno-18-77" name="__codelineno-18-77" href="#__codelineno-18-77"></a>  âœ“ Resource Group: Create rg-sandbox-k8s-weu
<a id="__codelineno-18-78" name="__codelineno-18-78" href="#__codelineno-18-78"></a>  â†’ Checking if Resource Group rg-sandbox-network-weu exists
<a id="__codelineno-18-79" name="__codelineno-18-79" href="#__codelineno-18-79"></a>  â†’ Creating Resource Group: rg-sandbox-network-weu in westeurope
<a id="__codelineno-18-80" name="__codelineno-18-80" href="#__codelineno-18-80"></a>  â†’ Running: Create rg-sandbox-network-weu
<a id="__codelineno-18-81" name="__codelineno-18-81" href="#__codelineno-18-81"></a>  âœ“ Resource Group: Create rg-sandbox-network-weu
<a id="__codelineno-18-82" name="__codelineno-18-82" href="#__codelineno-18-82"></a>
<a id="__codelineno-18-83" name="__codelineno-18-83" href="#__codelineno-18-83"></a>=== STEP 5: Creating VNet and Subnet ===
<a id="__codelineno-18-84" name="__codelineno-18-84" href="#__codelineno-18-84"></a>  â†’ Checking if VNet vnet-sandbox-network-weu exists
<a id="__codelineno-18-85" name="__codelineno-18-85" href="#__codelineno-18-85"></a>  âœ“ VNet vnet-sandbox-network-weu already exists
<a id="__codelineno-18-86" name="__codelineno-18-86" href="#__codelineno-18-86"></a>  â†’ Checking if Subnet sub-sandbox-k8s-weu exists
<a id="__codelineno-18-87" name="__codelineno-18-87" href="#__codelineno-18-87"></a>/subscriptions/&lt;subscription-id&gt;/resourceGroups/rg-sandbox-network-weu/providers/Microsoft.Network/virtualNetworks/vnet-sandbox-network-weu/subnets/sub-sandbox-k8s-weu
<a id="__codelineno-18-88" name="__codelineno-18-88" href="#__codelineno-18-88"></a>  âœ“ Subnet sub-sandbox-k8s-weu already exists
<a id="__codelineno-18-89" name="__codelineno-18-89" href="#__codelineno-18-89"></a>  â†’ Updating SUBNET_FULL_PATH variable
<a id="__codelineno-18-90" name="__codelineno-18-90" href="#__codelineno-18-90"></a>
<a id="__codelineno-18-91" name="__codelineno-18-91" href="#__codelineno-18-91"></a>=== STEP 6: Creating Network Security Group ===
<a id="__codelineno-18-92" name="__codelineno-18-92" href="#__codelineno-18-92"></a>  â†’ Checking if NSG nsg-sandbox-k8s-azure-microk8s-weu exists
<a id="__codelineno-18-93" name="__codelineno-18-93" href="#__codelineno-18-93"></a>  â†’ Creating NSG: nsg-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-18-94" name="__codelineno-18-94" href="#__codelineno-18-94"></a>  â†’ Running: Create NSG
<a id="__codelineno-18-95" name="__codelineno-18-95" href="#__codelineno-18-95"></a>  âœ“ Network: Create NSG
<a id="__codelineno-18-96" name="__codelineno-18-96" href="#__codelineno-18-96"></a>  â†’ Using Tailscale for secure access - no external SSH rule needed
<a id="__codelineno-18-97" name="__codelineno-18-97" href="#__codelineno-18-97"></a>
<a id="__codelineno-18-98" name="__codelineno-18-98" href="#__codelineno-18-98"></a>=== STEP 7: Creating Network Interface ===
<a id="__codelineno-18-99" name="__codelineno-18-99" href="#__codelineno-18-99"></a>  â†’ Creating network interface: nic-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-18-100" name="__codelineno-18-100" href="#__codelineno-18-100"></a>  â†’ Running: Create interface
<a id="__codelineno-18-101" name="__codelineno-18-101" href="#__codelineno-18-101"></a>  âœ“ Network: Create interface
<a id="__codelineno-18-102" name="__codelineno-18-102" href="#__codelineno-18-102"></a>
<a id="__codelineno-18-103" name="__codelineno-18-103" href="#__codelineno-18-103"></a>=== STEP 8: Creating Virtual Machine with Data Disk ===
<a id="__codelineno-18-104" name="__codelineno-18-104" href="#__codelineno-18-104"></a>  â†’ Starting VM creation (this may take several minutes)
<a id="__codelineno-18-105" name="__codelineno-18-105" href="#__codelineno-18-105"></a>  â†’ Running: Create
<a id="__codelineno-18-106" name="__codelineno-18-106" href="#__codelineno-18-106"></a>  âœ“ VM: Create
<a id="__codelineno-18-107" name="__codelineno-18-107" href="#__codelineno-18-107"></a>
<a id="__codelineno-18-108" name="__codelineno-18-108" href="#__codelineno-18-108"></a>=== STEP 9: Waiting for VM to be fully provisioned ===
<a id="__codelineno-18-109" name="__codelineno-18-109" href="#__codelineno-18-109"></a>  â†’ Running: Wait for creation
<a id="__codelineno-18-110" name="__codelineno-18-110" href="#__codelineno-18-110"></a>  âœ“ VM: Wait for creation
<a id="__codelineno-18-111" name="__codelineno-18-111" href="#__codelineno-18-111"></a>
<a id="__codelineno-18-112" name="__codelineno-18-112" href="#__codelineno-18-112"></a>=== STEP 10: Waiting for cloud-init to complete ===
<a id="__codelineno-18-113" name="__codelineno-18-113" href="#__codelineno-18-113"></a>  â†’ Checking if cloud-init has completed processing
<a id="__codelineno-18-114" name="__codelineno-18-114" href="#__codelineno-18-114"></a>  â†’ Unable to confirm cloud-init completion, checking MicroK8s status
<a id="__codelineno-18-115" name="__codelineno-18-115" href="#__codelineno-18-115"></a>  âœ“ MicroK8s is running - cloud-init has likely completed successfully
<a id="__codelineno-18-116" name="__codelineno-18-116" href="#__codelineno-18-116"></a>
<a id="__codelineno-18-117" name="__codelineno-18-117" href="#__codelineno-18-117"></a>=== STEP 11: Formatting and mounting data disk ===
<a id="__codelineno-18-118" name="__codelineno-18-118" href="#__codelineno-18-118"></a>  â†’ Running on VM: Formatting and mounting data disk
<a id="__codelineno-18-119" name="__codelineno-18-119" href="#__codelineno-18-119"></a>  âœ“ VM Command: Formatting and mounting data disk
<a id="__codelineno-18-120" name="__codelineno-18-120" href="#__codelineno-18-120"></a>Enable succeeded: 
<a id="__codelineno-18-121" name="__codelineno-18-121" href="#__codelineno-18-121"></a>[stdout]
<a id="__codelineno-18-122" name="__codelineno-18-122" href="#__codelineno-18-122"></a>meta-data=/dev/sdc1              isize=512    agcount=4, agsize=3276672 blks
<a id="__codelineno-18-123" name="__codelineno-18-123" href="#__codelineno-18-123"></a>         =                       sectsz=4096  attr=2, projid32bit=1
<a id="__codelineno-18-124" name="__codelineno-18-124" href="#__codelineno-18-124"></a>         =                       crc=1        finobt=1, sparse=1, rmapbt=0
<a id="__codelineno-18-125" name="__codelineno-18-125" href="#__codelineno-18-125"></a>         =                       reflink=1    bigtime=0 inobtcount=0
<a id="__codelineno-18-126" name="__codelineno-18-126" href="#__codelineno-18-126"></a>data     =                       bsize=4096   blocks=13106688, imaxpct=25
<a id="__codelineno-18-127" name="__codelineno-18-127" href="#__codelineno-18-127"></a>         =                       sunit=0      swidth=0 blks
<a id="__codelineno-18-128" name="__codelineno-18-128" href="#__codelineno-18-128"></a>naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
<a id="__codelineno-18-129" name="__codelineno-18-129" href="#__codelineno-18-129"></a>log      =internal log           bsize=4096   blocks=6399, version=2
<a id="__codelineno-18-130" name="__codelineno-18-130" href="#__codelineno-18-130"></a>         =                       sectsz=4096  sunit=1 blks, lazy-count=1
<a id="__codelineno-18-131" name="__codelineno-18-131" href="#__codelineno-18-131"></a>realtime =none                   extsz=4096   blocks=0, rtextents=0
<a id="__codelineno-18-132" name="__codelineno-18-132" href="#__codelineno-18-132"></a>Discarding blocks...Done.
<a id="__codelineno-18-133" name="__codelineno-18-133" href="#__codelineno-18-133"></a>/dev/sdc1 /mnt/urbalurbadisk xfs defaults 0 2
<a id="__codelineno-18-134" name="__codelineno-18-134" href="#__codelineno-18-134"></a>Disk formatted, mounted, and permissions set
<a id="__codelineno-18-135" name="__codelineno-18-135" href="#__codelineno-18-135"></a>
<a id="__codelineno-18-136" name="__codelineno-18-136" href="#__codelineno-18-136"></a>[stderr]
<a id="__codelineno-18-137" name="__codelineno-18-137" href="#__codelineno-18-137"></a>
<a id="__codelineno-18-138" name="__codelineno-18-138" href="#__codelineno-18-138"></a>=== STEP 12: Getting Tailscale IP and Hostname ===
<a id="__codelineno-18-139" name="__codelineno-18-139" href="#__codelineno-18-139"></a>  â†’ Getting Tailscale IP (may take multiple attempts)
<a id="__codelineno-18-140" name="__codelineno-18-140" href="#__codelineno-18-140"></a>  â†’ Attempt 1 of 10 to get Tailscale IP
<a id="__codelineno-18-141" name="__codelineno-18-141" href="#__codelineno-18-141"></a>  â†’ Attempt failed. Waiting for 30 seconds before retrying...
<a id="__codelineno-18-142" name="__codelineno-18-142" href="#__codelineno-18-142"></a>  â†’ Attempt 2 of 10 to get Tailscale IP
<a id="__codelineno-18-143" name="__codelineno-18-143" href="#__codelineno-18-143"></a>  âœ“ Successfully retrieved Tailscale IP: 100.64.192.33
<a id="__codelineno-18-144" name="__codelineno-18-144" href="#__codelineno-18-144"></a>  â†’ Using instance name as Tailscale hostname: azure-microk8s
<a id="__codelineno-18-145" name="__codelineno-18-145" href="#__codelineno-18-145"></a>
<a id="__codelineno-18-146" name="__codelineno-18-146" href="#__codelineno-18-146"></a>=== STEP 13: Creating cluster information file ===
<a id="__codelineno-18-147" name="__codelineno-18-147" href="#__codelineno-18-147"></a>  â†’ Creating: azure-microk8s.sh
<a id="__codelineno-18-148" name="__codelineno-18-148" href="#__codelineno-18-148"></a>  âœ“ Created azure-microk8s.sh
<a id="__codelineno-18-149" name="__codelineno-18-149" href="#__codelineno-18-149"></a>
<a id="__codelineno-18-150" name="__codelineno-18-150" href="#__codelineno-18-150"></a>=== STEP 14: Setting execute permissions for info file ===
<a id="__codelineno-18-151" name="__codelineno-18-151" href="#__codelineno-18-151"></a>  âœ“ Set executable permissions
<a id="__codelineno-18-152" name="__codelineno-18-152" href="#__codelineno-18-152"></a>
<a id="__codelineno-18-153" name="__codelineno-18-153" href="#__codelineno-18-153"></a>=== STEP 15: Testing Ansible user SSH access ===
<a id="__codelineno-18-154" name="__codelineno-18-154" href="#__codelineno-18-154"></a>  â†’ Testing SSH connection to 100.64.192.33
<a id="__codelineno-18-155" name="__codelineno-18-155" href="#__codelineno-18-155"></a>Warning: Permanently added &#39;100.64.192.33&#39; (ED25519) to the list of known hosts.
<a id="__codelineno-18-156" name="__codelineno-18-156" href="#__codelineno-18-156"></a>Ansible user SSH test successful
<a id="__codelineno-18-157" name="__codelineno-18-157" href="#__codelineno-18-157"></a>  âœ“ Ansible SSH access successful
<a id="__codelineno-18-158" name="__codelineno-18-158" href="#__codelineno-18-158"></a>
<a id="__codelineno-18-159" name="__codelineno-18-159" href="#__codelineno-18-159"></a>=== STEP 16: Displaying cluster information ===
<a id="__codelineno-18-160" name="__codelineno-18-160" href="#__codelineno-18-160"></a>  â†’ Checking MicroK8s status
<a id="__codelineno-18-161" name="__codelineno-18-161" href="#__codelineno-18-161"></a>  âœ“ MicroK8s is running
<a id="__codelineno-18-162" name="__codelineno-18-162" href="#__codelineno-18-162"></a>Enabled addons:
<a id="__codelineno-18-163" name="__codelineno-18-163" href="#__codelineno-18-163"></a>  âœ“ dashboard # (core) The Kubernetes dashboard
<a id="__codelineno-18-164" name="__codelineno-18-164" href="#__codelineno-18-164"></a>  âœ“ dns # (core) CoreDNS
<a id="__codelineno-18-165" name="__codelineno-18-165" href="#__codelineno-18-165"></a>  âœ“ ha-cluster # (core) Configure high availability on the current node
<a id="__codelineno-18-166" name="__codelineno-18-166" href="#__codelineno-18-166"></a>  âœ“ helm # (core) Helm - the package manager for Kubernetes
<a id="__codelineno-18-167" name="__codelineno-18-167" href="#__codelineno-18-167"></a>  âœ“ helm3 # (core) Helm 3 - the package manager for Kubernetes
<a id="__codelineno-18-168" name="__codelineno-18-168" href="#__codelineno-18-168"></a>  âœ“ hostpath-storage # (core) Storage class; allocates storage from host directory
<a id="__codelineno-18-169" name="__codelineno-18-169" href="#__codelineno-18-169"></a>  âœ“ metrics-server # (core) K8s Metrics Server for API access to service metrics
<a id="__codelineno-18-170" name="__codelineno-18-170" href="#__codelineno-18-170"></a>  âœ“ storage # (core) Alias to hostpath-storage add-on, deprecated
<a id="__codelineno-18-171" name="__codelineno-18-171" href="#__codelineno-18-171"></a>
<a id="__codelineno-18-172" name="__codelineno-18-172" href="#__codelineno-18-172"></a>===== Azure VM Creation Summary =====
<a id="__codelineno-18-173" name="__codelineno-18-173" href="#__codelineno-18-173"></a>Component Status:
<a id="__codelineno-18-174" name="__codelineno-18-174" href="#__codelineno-18-174"></a>  Network - Update variables: OK
<a id="__codelineno-18-175" name="__codelineno-18-175" href="#__codelineno-18-175"></a>  Cloud-Init - Completion: Likely successful (MicroK8s running)
<a id="__codelineno-18-176" name="__codelineno-18-176" href="#__codelineno-18-176"></a>  Resource Group - Create rg-sandbox-k8s-weu: OK
<a id="__codelineno-18-177" name="__codelineno-18-177" href="#__codelineno-18-177"></a>  Network - Create NSG: OK
<a id="__codelineno-18-178" name="__codelineno-18-178" href="#__codelineno-18-178"></a>  Network - Create interface: OK
<a id="__codelineno-18-179" name="__codelineno-18-179" href="#__codelineno-18-179"></a>  Ansible - SSH Test: Successful
<a id="__codelineno-18-180" name="__codelineno-18-180" href="#__codelineno-18-180"></a>  Resource Group - Create rg-sandbox-network-weu: OK
<a id="__codelineno-18-181" name="__codelineno-18-181" href="#__codelineno-18-181"></a>  VM Command - Formatting and mounting data disk: OK
<a id="__codelineno-18-182" name="__codelineno-18-182" href="#__codelineno-18-182"></a>  Azure - Set subscription: OK
<a id="__codelineno-18-183" name="__codelineno-18-183" href="#__codelineno-18-183"></a>  VM - Create: OK
<a id="__codelineno-18-184" name="__codelineno-18-184" href="#__codelineno-18-184"></a>  Tailscale - Hostname: azure-microk8s
<a id="__codelineno-18-185" name="__codelineno-18-185" href="#__codelineno-18-185"></a>  VM - Wait for creation: OK
<a id="__codelineno-18-186" name="__codelineno-18-186" href="#__codelineno-18-186"></a>  Configuration - File Permissions: Set successfully
<a id="__codelineno-18-187" name="__codelineno-18-187" href="#__codelineno-18-187"></a>  MicroK8s - Status: Running
<a id="__codelineno-18-188" name="__codelineno-18-188" href="#__codelineno-18-188"></a>  Network - SSH Access: Secured via Tailscale
<a id="__codelineno-18-189" name="__codelineno-18-189" href="#__codelineno-18-189"></a>  Azure CLI - Setting login experience: OK
<a id="__codelineno-18-190" name="__codelineno-18-190" href="#__codelineno-18-190"></a>  Tailscale - IP: 100.64.192.33
<a id="__codelineno-18-191" name="__codelineno-18-191" href="#__codelineno-18-191"></a>
<a id="__codelineno-18-192" name="__codelineno-18-192" href="#__codelineno-18-192"></a>VM creation completed successfully.
<a id="__codelineno-18-193" name="__codelineno-18-193" href="#__codelineno-18-193"></a>  Virtual Machine: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-18-194" name="__codelineno-18-194" href="#__codelineno-18-194"></a>  Resource Group: rg-sandbox-k8s-weu
<a id="__codelineno-18-195" name="__codelineno-18-195" href="#__codelineno-18-195"></a>  Tailscale IP: 100.64.192.33
<a id="__codelineno-18-196" name="__codelineno-18-196" href="#__codelineno-18-196"></a>  Tailscale Hostname: azure-microk8s
<a id="__codelineno-18-197" name="__codelineno-18-197" href="#__codelineno-18-197"></a>
<a id="__codelineno-18-198" name="__codelineno-18-198" href="#__codelineno-18-198"></a>To SSH to the VM, use:
<a id="__codelineno-18-199" name="__codelineno-18-199" href="#__codelineno-18-199"></a>  ssh -i /mnt/urbalurbadisk/secrets/id_rsa_ansible ansible@100.64.192.33
</code></pre></div>
<h3 id="inventory-log">Inventory log<a class="headerlink" href="#inventory-log" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>./02-azure-ansible-inventory-v2.sh
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>================================================
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>      Azure VM Ansible Inventory Update V2      
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>================================================
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>=== STEP 1: Checking current directory ===
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>  â†’ Current directory: azure-microk8s
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>  âœ“ Correct directory confirmed: hosts/azure-microk8s
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>=== STEP 2: Loading configuration ===
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>  â†’ Checking if ./azure-vm-config-redcross-sandbox.sh exists
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>  âœ“ File ./azure-vm-config-redcross-sandbox.sh found
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>  â†’ Loading configuration from ./azure-vm-config-redcross-sandbox.sh
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>  âœ“ Successfully loaded configuration from ./azure-vm-config-redcross-sandbox.sh
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>  â†’ Checking if azure-microk8s.sh exists
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>  âœ“ File azure-microk8s.sh found
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>  â†’ Loading cluster information from azure-microk8s.sh
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>  âœ“ Successfully loaded cluster information from azure-microk8s.sh
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>  â†’ Loaded configuration:
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>  Cluster Name: azure-microk8s
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>  Tailscale IP: 100.64.192.33
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>  Host Name: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>  Ansible Directory: /mnt/urbalurbadisk/ansible
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>=== STEP 3: Updating Ansible inventory ===
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>  â†’ Validating configuration variables
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>  âœ“ Configuration variables validated
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>  â†’ Checking if Ansible directory exists: /mnt/urbalurbadisk/ansible
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>  âœ“ Ansible directory exists
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>  â†’ Checking if inventory playbook exists: /mnt/urbalurbadisk/ansible/playbooks/02-update-ansible-inventory.yml
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>  âœ“ Inventory playbook exists
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>  â†’ Pre-checking SSH connectivity to 100.64.192.33 (port 22)
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>  â†’ Running: SSH Connectivity Test
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>  âœ“ Network: SSH Connectivity Test
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>  âœ“ SSH connectivity to 100.64.192.33 confirmed
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>  â†’ Running Ansible playbook to update inventory
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>  â†’ Running: Update Inventory
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>  âœ“ Ansible: Update Inventory
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>  âœ“ Ansible inventory updated successfully via playbook
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>=== STEP 5: Validating Ansible inventory file ===
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>  â†’ Checking if inventory file exists: /mnt/urbalurbadisk/ansible/inventory.yml
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>  âœ“ Inventory file exists
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>  â†’ Checking if inventory file is valid YAML
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>  â†’ Running: YAML Syntax
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>  âœ“ Validation: YAML Syntax
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>  âœ“ Inventory file is valid YAML
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>  â†’ Checking if azure-microk8s exists in inventory
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>  âœ“ Cluster name azure-microk8s found in inventory
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>  â†’ Checking if IP address is correct
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>  âœ“ IP address 100.x.x.x correctly set for azure-microk8s
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>=== STEP 4: Testing Ansible connection ===
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>  â†’ Checking network connectivity to 100.x.x.x
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>  â†’ Running: ICMP Ping Test
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>  âœ“ Network: ICMP Ping Test
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>  âœ“ Host 100.x.x.x is reachable via ICMP ping
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a>  â†’ Checking if SSH key exists: /mnt/urbalurbadisk/secrets/id_rsa_ansible
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>  âœ“ SSH key found
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>  â†’ Pinging host azure-microk8s via Ansible
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>  â†’ Running: Connection Test
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>  âœ“ Ansible: Connection Test
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>  âœ“ Successfully connected to azure-microk8s via Ansible
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a>
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>=== STEP 6: Summary ===
<a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a>===== Ansible Inventory Update Summary =====
<a id="__codelineno-19-67" name="__codelineno-19-67" href="#__codelineno-19-67"></a>Component Status:
<a id="__codelineno-19-68" name="__codelineno-19-68" href="#__codelineno-19-68"></a>  Configuration - Cluster Info: OK
<a id="__codelineno-19-69" name="__codelineno-19-69" href="#__codelineno-19-69"></a>  Ansible - Connection Test: OK
<a id="__codelineno-19-70" name="__codelineno-19-70" href="#__codelineno-19-70"></a>  Ansible - Update Inventory: OK
<a id="__codelineno-19-71" name="__codelineno-19-71" href="#__codelineno-19-71"></a>  Network - SSH Connectivity: OK
<a id="__codelineno-19-72" name="__codelineno-19-72" href="#__codelineno-19-72"></a>  Configuration - Main Config: OK
<a id="__codelineno-19-73" name="__codelineno-19-73" href="#__codelineno-19-73"></a>  Ansible - Inventory Update: Successful
<a id="__codelineno-19-74" name="__codelineno-19-74" href="#__codelineno-19-74"></a>  Environment - Directory: OK
<a id="__codelineno-19-75" name="__codelineno-19-75" href="#__codelineno-19-75"></a>  Network - ICMP Ping: OK
<a id="__codelineno-19-76" name="__codelineno-19-76" href="#__codelineno-19-76"></a>  Network - SSH Connectivity Test: OK
<a id="__codelineno-19-77" name="__codelineno-19-77" href="#__codelineno-19-77"></a>  Validation - YAML Syntax: OK
<a id="__codelineno-19-78" name="__codelineno-19-78" href="#__codelineno-19-78"></a>  Network - ICMP Ping Test: OK
<a id="__codelineno-19-79" name="__codelineno-19-79" href="#__codelineno-19-79"></a>  Validation - IP Address: Correct
<a id="__codelineno-19-80" name="__codelineno-19-80" href="#__codelineno-19-80"></a>
<a id="__codelineno-19-81" name="__codelineno-19-81" href="#__codelineno-19-81"></a>âœ… Ansible inventory update completed successfully.
<a id="__codelineno-19-82" name="__codelineno-19-82" href="#__codelineno-19-82"></a>  Cluster Name: azure-microk8s
<a id="__codelineno-19-83" name="__codelineno-19-83" href="#__codelineno-19-83"></a>  Host IP: 100.x.x.x
<a id="__codelineno-19-84" name="__codelineno-19-84" href="#__codelineno-19-84"></a>  Inventory File: /mnt/urbalurbadisk/ansible/inventory.yml
<a id="__codelineno-19-85" name="__codelineno-19-85" href="#__codelineno-19-85"></a>
<a id="__codelineno-19-86" name="__codelineno-19-86" href="#__codelineno-19-86"></a>You can now manage this VM through Ansible:
<a id="__codelineno-19-87" name="__codelineno-19-87" href="#__codelineno-19-87"></a>  ansible azure-microk8s -m ping
<a id="__codelineno-19-88" name="__codelineno-19-88" href="#__codelineno-19-88"></a>  ansible-playbook your-playbook.yml -l azure-microk8s
<a id="__codelineno-19-89" name="__codelineno-19-89" href="#__codelineno-19-89"></a>
<a id="__codelineno-19-90" name="__codelineno-19-90" href="#__codelineno-19-90"></a>Common Ansible commands:
<a id="__codelineno-19-91" name="__codelineno-19-91" href="#__codelineno-19-91"></a>  # Check system facts
<a id="__codelineno-19-92" name="__codelineno-19-92" href="#__codelineno-19-92"></a>  ansible azure-microk8s -m setup
<a id="__codelineno-19-93" name="__codelineno-19-93" href="#__codelineno-19-93"></a>  # Run ad-hoc command
<a id="__codelineno-19-94" name="__codelineno-19-94" href="#__codelineno-19-94"></a>  ansible azure-microk8s -a &quot;microk8s status&quot;
<a id="__codelineno-19-95" name="__codelineno-19-95" href="#__codelineno-19-95"></a>  # Apply a playbook to this host
<a id="__codelineno-19-96" name="__codelineno-19-96" href="#__codelineno-19-96"></a>  ansible-playbook path/to/playbook.yml -l azure-microk8s
</code></pre></div>
<h3 id="cleanup-example-log">Cleanup Example Log<a class="headerlink" href="#cleanup-example-log" title="Permanent link">&para;</a></h3>
<p>Below is a truncated example of a successful cleanup operation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>./azure-vm-cleanup-redcross-v2.sh azure-microk8s
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>â†’ Loading configuration from ./azure-vm-config-redcross-sandbox.sh
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>âœ“ Configuration loaded
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>The following resources will be deleted:
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>  VM Instance Name: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>  Resource Group: rg-sandbox-k8s-weu
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>  Network Interface: nic-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>  Network Security Group: nsg-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>  OS Disk: disk-os-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>  Data Disk: disk-data-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>Are you sure you want to delete these resources? (yes/no): yes
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>=== STEP 1: Activating Privileged Identity Management (PIM) role ===
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>IMPORTANT: You need the Contributor role on the Azure subscription to run this script.
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>In Azure this is a ClickOps operation (the M$ guys did not grow up using a command line tool)
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>To activate the Contributor role in Azure:
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>  1) Search for PIM in the Azure portal search bar
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>  2) Click on Microsoft Entra Privileged Identity Management
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>  3) On the PIM page, click &quot;My roles&quot;
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>  4) Click &quot;Azure resources&quot;
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>  5) Click &quot;Activate&quot; next to the Contributor role
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>Alternatively, click on this URL (Ctrl+Click in most terminals):
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>https://portal.azure.com/?feature.msaljs=true#view/Microsoft_Azure_PIMCommon/ActivationMenuBlade/~/azurerbac
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>Search for your resource, click on the name, and then click on the Contributor role.
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>After you have activated your Contributor role, press Enter to continue...
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>Continuing with script execution...
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>=== STEP 2: Setting up Azure CLI and login ===
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a>â†’ Setting Azure CLI login experience
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>Command group &#39;config&#39; is experimental and under development. Reference and support levels: https://aka.ms/CLI_refstatus
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>âœ“ Setting Azure CLI login experience succeeded
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a>â†’ Initiating Azure login with device code authentication
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>Please follow these steps to log in:
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a>  1. Open a web browser and go to: https://microsoft.com/devicelogin
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a>  2. Enter the code that will be displayed below
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>  3. Follow the prompts to complete the login process
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>To sign in, use a web browser to open the page https://microsoft.com/devicelogin and enter the code XXXXXXXX to authenticate.
<a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a>[
<a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a>  // Azure subscription output - multiple subscriptions may appear
<a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a>  {
<a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a>    &quot;cloudName&quot;: &quot;AzureCloud&quot;,
<a id="__codelineno-20-45" name="__codelineno-20-45" href="#__codelineno-20-45"></a>    &quot;homeTenantId&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-20-46" name="__codelineno-20-46" href="#__codelineno-20-46"></a>    &quot;id&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-20-47" name="__codelineno-20-47" href="#__codelineno-20-47"></a>    &quot;isDefault&quot;: true,
<a id="__codelineno-20-48" name="__codelineno-20-48" href="#__codelineno-20-48"></a>    &quot;managedByTenants&quot;: [],
<a id="__codelineno-20-49" name="__codelineno-20-49" href="#__codelineno-20-49"></a>    &quot;name&quot;: &quot;Your Subscription Name&quot;,
<a id="__codelineno-20-50" name="__codelineno-20-50" href="#__codelineno-20-50"></a>    &quot;state&quot;: &quot;Enabled&quot;,
<a id="__codelineno-20-51" name="__codelineno-20-51" href="#__codelineno-20-51"></a>    &quot;tenantId&quot;: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;,
<a id="__codelineno-20-52" name="__codelineno-20-52" href="#__codelineno-20-52"></a>    &quot;user&quot;: {
<a id="__codelineno-20-53" name="__codelineno-20-53" href="#__codelineno-20-53"></a>      &quot;name&quot;: &quot;user@organization.com&quot;,
<a id="__codelineno-20-54" name="__codelineno-20-54" href="#__codelineno-20-54"></a>      &quot;type&quot;: &quot;user&quot;
<a id="__codelineno-20-55" name="__codelineno-20-55" href="#__codelineno-20-55"></a>    }
<a id="__codelineno-20-56" name="__codelineno-20-56" href="#__codelineno-20-56"></a>  }
<a id="__codelineno-20-57" name="__codelineno-20-57" href="#__codelineno-20-57"></a>  // Additional subscriptions removed for brevity
<a id="__codelineno-20-58" name="__codelineno-20-58" href="#__codelineno-20-58"></a>]
<a id="__codelineno-20-59" name="__codelineno-20-59" href="#__codelineno-20-59"></a>âœ“ Azure login successful
<a id="__codelineno-20-60" name="__codelineno-20-60" href="#__codelineno-20-60"></a>â†’ Setting Azure subscription to &lt;your-subscription-id&gt;
<a id="__codelineno-20-61" name="__codelineno-20-61" href="#__codelineno-20-61"></a>âœ“ Setting Azure subscription succeeded
<a id="__codelineno-20-62" name="__codelineno-20-62" href="#__codelineno-20-62"></a>
<a id="__codelineno-20-63" name="__codelineno-20-63" href="#__codelineno-20-63"></a>=== STEP 3: Checking for resource existence ===
<a id="__codelineno-20-64" name="__codelineno-20-64" href="#__codelineno-20-64"></a>â†’ Checking if VM exists: vm-sandbox-k8s-azure-microk8s-weu
<a id="__codelineno-20-65" name="__codelineno-20-65" href="#__codelineno-20-65"></a>âœ“ VM vm-sandbox-k8s-azure-microk8s-weu found - will be deleted
<a id="__codelineno-20-66" name="__codelineno-20-66" href="#__codelineno-20-66"></a>
<a id="__codelineno-20-67" name="__codelineno-20-67" href="#__codelineno-20-67"></a>=== STEP 4: Deleting Azure resources ===
<a id="__codelineno-20-68" name="__codelineno-20-68" href="#__codelineno-20-68"></a>â†’ Checking if we should delete resource group rg-sandbox-k8s-weu
<a id="__codelineno-20-69" name="__codelineno-20-69" href="#__codelineno-20-69"></a>â†’ Only one VM exists in resource group rg-sandbox-k8s-weu - safe to delete entire group
<a id="__codelineno-20-70" name="__codelineno-20-70" href="#__codelineno-20-70"></a>â†’ Deleting entire resource group: rg-sandbox-k8s-weu
<a id="__codelineno-20-71" name="__codelineno-20-71" href="#__codelineno-20-71"></a>âœ“ Deleting resource group rg-sandbox-k8s-weu succeeded
<a id="__codelineno-20-72" name="__codelineno-20-72" href="#__codelineno-20-72"></a>Resource deletion initiated.
<a id="__codelineno-20-73" name="__codelineno-20-73" href="#__codelineno-20-73"></a>Note: Resource group deletion happens asynchronously and may take several minutes to complete.
<a id="__codelineno-20-74" name="__codelineno-20-74" href="#__codelineno-20-74"></a>
<a id="__codelineno-20-75" name="__codelineno-20-75" href="#__codelineno-20-75"></a>Would you like this script to wait and confirm complete deletion? (yes/no): yes
<a id="__codelineno-20-76" name="__codelineno-20-76" href="#__codelineno-20-76"></a>â†’ Waiting for resource group deletion to complete (this may take 5-10 minutes)...
<a id="__codelineno-20-77" name="__codelineno-20-77" href="#__codelineno-20-77"></a>â†’ Attempt 1/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-78" name="__codelineno-20-78" href="#__codelineno-20-78"></a>â†’ Attempt 2/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-79" name="__codelineno-20-79" href="#__codelineno-20-79"></a>â†’ Attempt 3/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-80" name="__codelineno-20-80" href="#__codelineno-20-80"></a>â†’ Attempt 4/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-81" name="__codelineno-20-81" href="#__codelineno-20-81"></a>â†’ Attempt 5/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-82" name="__codelineno-20-82" href="#__codelineno-20-82"></a>â†’ Attempt 6/20: Resource group is in state: Deleting. Waiting 30s...
<a id="__codelineno-20-83" name="__codelineno-20-83" href="#__codelineno-20-83"></a>âœ“ Resource group rg-sandbox-k8s-weu has been successfully deleted!
<a id="__codelineno-20-84" name="__codelineno-20-84" href="#__codelineno-20-84"></a>
<a id="__codelineno-20-85" name="__codelineno-20-85" href="#__codelineno-20-85"></a>=== STEP 5: Cleanup complete ===
<a id="__codelineno-20-86" name="__codelineno-20-86" href="#__codelineno-20-86"></a>Azure resources cleanup completed!
<a id="__codelineno-20-87" name="__codelineno-20-87" href="#__codelineno-20-87"></a>Don&#39;t forget to manually delete the host from tailscale network if needed.
<a id="__codelineno-20-88" name="__codelineno-20-88" href="#__codelineno-20-88"></a>Go to https://login.tailscale.com/admin/machines and delete the machine named: azure-microk8s
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/terchris/urbalurba-infrastructure" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>